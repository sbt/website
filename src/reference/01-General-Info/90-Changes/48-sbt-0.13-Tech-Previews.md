---
out: sbt-0.13-Tech-Previews.html
---

## sbt 0.13.5+ Technology Previews

sbt 0.13.5+ releases of sbt are technology previews of what's to come to sbt 1.0 with enhancements like [auto plugins][Auto-Plugins-Post], launcher enhacements for sbt server, defined in the sbt-remote-control project, and other necessary API changes.

These releases maintain binary compatibility with plugins that are published against sbt 0.13.0, but add new features in preparation for sbt 1.0. The tech previews allow us to test new ideas like auto plugins and performance improvements on dependency resolution; the build users can try new features without losing the existing plugin resources; and plugin authors can gradually migrate to the new plugin system before sbt 1.0 arrives.

## sbt 0.13.12

  [@eed3si9n]: https://github.com/eed3si9n
  [@jsuereth]: https://github.com/jsuereth
  [@dwijnand]: http://github.com/dwijnand
  [@Duhemm]: http://github.com/Duhemm
  [@gkossakowski]: https://github.com/gkossakowski
  [milessabin]: https://github.com/milessabin
  [@ekrich]: https://github.com/ekrich
  [@smarter]: https://github.com/smarter
  [@anatolydwnld]: https://github.com/anatolydwnld
  [2637]: https://github.com/sbt/sbt/pull/2637
  [2286]: https://github.com/sbt/sbt/issues/2286
  [2634]: https://github.com/sbt/sbt/pull/2634
  [2530]: https://github.com/sbt/sbt/pull/2530
  [2460]: https://github.com/sbt/sbt/issues/2460
  [2469]: https://github.com/sbt/sbt/pull/2469
  [2432]: https://github.com/sbt/sbt/pull/2432
  [2326]: https://github.com/sbt/sbt/issues/2326
  [2438]: https://github.com/sbt/sbt/pull/2438
  [2431]: https://github.com/sbt/sbt/issues/2431
  [2500]: https://github.com/sbt/sbt/pull/2500
  [2435]: https://github.com/sbt/sbt/issues/2435
  [2513]: https://github.com/sbt/sbt/pull/2513
  [2560]: https://github.com/sbt/sbt/issues/2560
  [2563]: https://github.com/sbt/sbt/pull/2563
  [2519]: https://github.com/sbt/sbt/issues/2519
  [2569]: https://github.com/sbt/sbt/pull/2569
  [2497]: https://github.com/sbt/sbt/issues/2497
  [2557]: https://github.com/sbt/sbt/pull/2557
  [2603]: https://github.com/sbt/sbt/pull/2603
  [2630]: https://github.com/sbt/sbt/pull/2630
  [2653]: https://github.com/sbt/sbt/pull/2653

### Fixes with compatibility implications

- By default the Scala toolchain artifacts are now transitively resolved using the provided `scalaVersion` and
  `scalaOrganization`. Previously a user specified `scalaOrganization` would not have affected transitive
  dependencies on, eg. `scala-reflect`. An Ivy-level mechanism is used for this purpose, and as a consequence
  the overriding happens early in the resolution process which might improve resolution times, and as a side
  benefit fixes [#2286][2286]. The old behavior can be restored by adding
  `ivyScala := { ivyScala.value map {_.copy(overrideScalaVersion = sbtPlugin.value)} }`
  to your build. [#2286][2286]/[#2634][2634] by [@milessabin][milessabin]
- The Build trait is deprecated in favor of the `.sbt` format [#2530][2530] by [@dwijnand][@dwijnand]

### Improvements

- When `RecompileOnMacroDef` is enabled, sbt will now print out a info level log indicating that some sources are being recompiled because it's used from a source that contains a macro definition. [#2637][2637] by [@eed3si9n][@eed3si9n]
- Adds Windows script support and native file extensions on Unix platforms. [#2603][2603] by [@ekrich][@ekrich]
- Improves loading time of large builds. [#2630][2630] by [@eed3si9n][@eed3si9n]
- Adds the ability to call `dependsOn` for the current project inside a `.sbt` file. [#2653][2653] by [@anatolydwnld][@anatolydwnld]

### Bug fixes

- Fixes a 0.13.11 regression: dependency resolution hitting Maven Central even with repository overrides. [#2519][2519]/[#2569][2569] by [@eed3si9n][@eed3si9n]
- Fixes a 0.13.11 regression in incremental compiler: `IndexOutOfBoundsException` in ExtractAPI [#2497][2497]/[#2557][2557] by [@smarter][@smarter]
- Fixes merged dependency descriptors dropping configuration specification. [#2002][2005]/[#1500][1500] by [@eed3si9n][@eed3si9n]
- Fixes merged dependency descriptors creating non-existing artifacts. [#2431]/[2431]/[#2500]/[2500] by [@Duhemm][@Duhemm]
- Fixes incremental compilation misses when macro expansion references another source. [#2560][2560]/[#2563][2563] by [@eed3si9n][@eed3si9n]
- Fixes incremental compilation of package objects transitively in name hashing. [#2432][2432]/[#2326][2326] by [@gkossakowski][@gkossakowski]
- Fixes incremental compilation relying on filename of package objects. [#2438][2438] by [@Duhemm][@Duhemm]
- Provides a workaround flag `incOptions := incOptions.value.withIncludeSynthToNameHashing(true)` for name hashing not including synthetic methods. This will not be enabled by default in sbt 0.13. It can also enabled by passing `sbt.inc.include_synth=true` to JVM. [#2537][2573] by [@eed3si9n][@eed3si9n]
- Fixes tab completion for tasks defined in AutoPlugin's buildSettings [#2460][2460]/[#2469][2469] by [@Duhemm][@Duhemm]
- Fixes configuration merging during cached resolution. [#2435][2435]/[#2513][2513] by [@Duhemm][@Duhemm]

## sbt 0.13.11

  [@eed3si9n]: https://github.com/eed3si9n
  [@jsuereth]: https://github.com/jsuereth
  [@dwijnand]: http://github.com/dwijnand
  [@Duhemm]: http://github.com/Duhemm
  [@gkossakowski]: https://github.com/gkossakowski
  [@adriaanm]: https://github.com/adriaanm
  [@jrudolph]: https://github.com/jrudolph
  [@stuhood]: https://github.com/stuhood
  [@pdalpra]: https://github.com/pdalpra
  [@fkorotkov]: http://github.com/fkorotkov
  [@hgiddens]: https://github.com/hgiddens
  [@DavidPerezIngeniero]: https://github.com/DavidPerezIngeniero
  [@romanowski]: https://github.com/romanowski
  [@timcharper]: https://github.com/timcharper
  [@smarter]: https://github.com/smarter
  [@retronym]: https://github.com/retronym

  [Dotty]: https://github.com/lampepfl/dotty
  [JLine2]: https://github.com/jline/jline2

  [14]: https://github.com/sbt/ivy/pull/14
  [17]: https://github.com/sbt/ivy/pull/17
  [18]: https://github.com/sbt/ivy/pull/18

  [1171]: https://github.com/sbt/sbt/issues/1171
  [1514]: https://github.com/sbt/sbt/issues/1514
  [1616]: https://github.com/sbt/sbt/issues/1616
  [1681]: https://github.com/sbt/sbt/issues/1681
  [1750]: https://github.com/sbt/sbt/issues/1750
  [1827]: https://github.com/sbt/sbt/issues/1827
  [1933]: https://github.com/sbt/sbt/issues/1933
  [1967]: https://github.com/sbt/sbt/issues/1967
  [1968]: https://github.com/sbt/sbt/issues/1968
  [2041]: https://github.com/sbt/sbt/issues/2041
  [2071]: https://github.com/sbt/sbt/issues/2071
  [2085]: https://github.com/sbt/sbt/pull/2085
  [2087]: https://github.com/sbt/sbt/issues/2087
  [2091]: https://github.com/sbt/sbt/pull/2091
  [2092]: https://github.com/sbt/sbt/pull/2092
  [2094]: https://github.com/sbt/sbt/pull/2094
  [2095]: https://github.com/sbt/sbt/pull/2095
  [2103]: https://github.com/sbt/sbt/pull/2103
  [2106]: https://github.com/sbt/sbt/pull/2106
  [2107]: https://github.com/sbt/sbt/issues/2107
  [2108]: https://github.com/sbt/sbt/pull/2108
  [2109]: https://github.com/sbt/sbt/issues/2109
  [2112]: https://github.com/sbt/sbt/pull/2112
  [2114]: https://github.com/sbt/sbt/pull/2114
  [2117]: https://github.com/sbt/sbt/pull/2117
  [2118]: https://github.com/sbt/sbt/issues/2118
  [2120]: https://github.com/sbt/sbt/issues/2120
  [2127]: https://github.com/sbt/sbt/pull/2127
  [2137]: https://github.com/sbt/sbt/pull/2137
  [2139]: https://github.com/sbt/sbt/pull/2139
  [2142]: https://github.com/sbt/sbt/pull/2142
  [2151]: https://github.com/sbt/sbt/pull/2151
  [2155]: https://github.com/sbt/sbt/issues/2155
  [2158]: https://github.com/sbt/sbt/pull/2158
  [2160]: https://github.com/sbt/sbt/pull/2160
  [2163]: https://github.com/sbt/sbt/pull/2163
  [2172]: https://github.com/sbt/sbt/pull/2172
  [2173]: https://github.com/sbt/sbt/pull/2173
  [2186]: https://github.com/sbt/sbt/pull/2186
  [2192]: https://github.com/sbt/sbt/pull/2192
  [2197]: https://github.com/sbt/sbt/pull/2197
  [2201]: https://github.com/sbt/sbt/pull/2201
  [2214]: https://github.com/sbt/sbt/pull/2214
  [2217]: https://github.com/sbt/sbt/issues/2217
  [2228]: https://github.com/sbt/sbt/issues/2228
  [2256]: https://github.com/sbt/sbt/issues/2256
  [2258]: https://github.com/sbt/sbt/pull/2258
  [2261]: https://github.com/sbt/sbt/pull/2261
  [2264]: https://github.com/sbt/sbt/issues/2264
  [2266]: https://github.com/sbt/sbt/issues/2266
  [2271]: https://github.com/sbt/sbt/pull/2271
  [2272]: https://github.com/sbt/sbt/pull/2272
  [2285]: https://github.com/sbt/sbt/pull/2285
  [2302]: https://github.com/sbt/sbt/issues/2302
  [2303]: https://github.com/sbt/sbt/pull/2303
  [2311]: https://github.com/sbt/sbt/pull/2311
  [2313]: https://github.com/sbt/sbt/pull/2313
  [2322]: https://github.com/sbt/sbt/pull/2322
  [2324]: https://github.com/sbt/sbt/issues/2324
  [2325]: https://github.com/sbt/sbt/pull/2325
  [2336]: https://github.com/sbt/sbt/issues/2336
  [2343]: https://github.com/sbt/sbt/pull/2343
  [2344]: https://github.com/sbt/sbt/pull/2344
  [2354]: https://github.com/sbt/sbt/pull/2354
  [2399]: https://github.com/sbt/sbt/pull/2399
  [2453]: https://github.com/sbt/sbt/pull/2453
  [2467]: https://github.com/sbt/sbt/pull/2467
  [101]: https://github.com/sbt/sbt-launcher-package/pull/101
  [105]: https://github.com/sbt/sbt-launcher-package/pull/105

### Fixes with compatibility implications

- JCenter is now opt-in. A new setting `useJCenter` can be set to `true` to re-include it, as the first external resolver to find library dependencies. [#2217][2217]/[#2467][2467] by [@eed3si9n][@eed3si9n]
- Adds `withInterProjectFirst` to the update option, which is enabled by default. When set to `true`, `inter-project` resolver will be prioritized above all resolvers and Ivy cache. [#1827][1827] by [@eed3si9n][@eed3si9n]
- Fixes update option's `withLatestSnapshots` so it handles modules without an artifact. This flag will be enabled by default.
  [#1514][1514]/[#1616][1616]/[#2313][2313] by [@eed3si9n][@eed3si9n]
- No longer passes `-J<flag>` options to the local Java compiler. [#1968][1968]/[#2272][2272] by [@Duhemm][@Duhemm]
- Fixes auto imports for auto plugins in global configuration files. Because this is *not* source compatible with 0.13.x, the fix is enabled only when `sbt.global.autoimport` flag is `true`. [#2120][2120]/[#2399][2399] by [@timcharper][@timcharper]

### Improvements

- Adds configurable compiler bridge. See below.
- Adds initial support for [Dotty][Dotty]. See below
- Adds settings for granular inter-project dependency tracking. See below.
- Scala version used by the build is updated to 2.10.6. [#2311][2311] by [@eed3si9n][@eed3si9n]
- If `publishMavenStyle` is `true`, `update` task warns when it sees intransitive dependencies, which do not translate to Maven. [#2127][2127] by [@jsuereth][@jsuereth]
- Adds `Def.settings`, which facilitates mixing settings with seq of settings. See below.
- sbt Serialization is updated to 0.1.2. [#2117][2117] by [@dwijnand][@dwijnand]
- Hides the stack trace on compilation error in build definition. [#2071][2071]/[#2091][2091] by [@Duhemm][@Duhemm]
- Makes the dummy `Logger.Null` public. [#2094][2094] by [@pdalpra][@pdalpra]
- Uses diagnostic classes to get lines contents in local Java compiler. [#2108][2108]/[#2201][2201] by [@fkorotkov][@fkorotkov]
- Adds logging of javaOptions. [#2087][2087]/[#2103][2103] by [@pdalpra][@pdalpra]
- Warns when javaOptions are defined but fork is set to false. [#2041][2041]/[#2103][2103] by [@pdalpra][@pdalpra]
- Adds an `Append.Sequence` instance for `List` to allow `+=`/`++=` on `developers` setting. [#2107][2107]/[#2114][2114] by [@pdalpra][@pdalpra]
- Drops `sealed` from the typeclasses in `Append`. [#2322][2322] by [@dwijnand][@dwijnand]
- Fixes compilation warnings in sbt's codebase, and other clean ups. [#2112][2112]/[#2137][2137]/[#2139][2139]/[#2142][2142] by [@pdalpra][@pdalpra]
- Adds `localIfFile` to `MavenRepository`, to force artifacts to be copied to the cache. [#2172][2172] by [@dwijnand][@dwijnand]
- Adds `Resolver.bintrayIvyRepo(owner, repo)`. [#2285][2285] by [@dwijnand][@dwijnand]
- Non-static annotation changes are no longer tracked by the incremental compiler. [#2343][2343] by [@romanowski][@romanowski]
- Reduces the memory usage of API info extraction in the incremental compiler. [#2343][2343] by [@adriaanm][@adriaanm]
- Memory-related options can now be overridden individually via the `-J` options. [sbt/sbt-launcher-package#105][105]

### Bug fixes

- Fixes the false positive of inconsistent duplicate warnings. [#1933][1933]/[#2258][2258] by
  [@Duhemm][@Duhemm]
- Fixes task scheduling performance on large builds by skipping checks in `sbt.Execute`. [#2302][2302]/[#2303][2303] by [@jrudolph][@jrudolph]
- Fixes changes in value classes by registering signatures of method before and after erasure. [#1171][1171]/[#2261][2261] by [@Duhemm][@Duhemm]
- Updated Ivy to merge IVY-1526 fix. [sbt/ivy#14][14]/[#2118][2118] by [@jsuereth][@jsuereth]
- Fixes `updateClassifiers` downloading updated snapshot sources and docs.
  [#1750][1750]/[sbt/ivy#17][17]/[#2163][2163]/[sbt/ivy#18][18]/[#2186][2186] by [@dwijnand][@dwijnand]
- Fixes `updateClassifiers` on Ivy modules without `default` configuration.
  [#2264][2264] by [@eed3si9n][@eed3si9n]/[@Duhemm][@Duhemm]
- Updated [JLine][JLine2] to version 2.13. [#1681][1681]/[#2173][2173]
- Changing the value of a constant (final-static-primitive) field will now
  correctly trigger incremental compilation for downstream classes. This is to
  account for the fact that Java compilers may inline constant fields in
  downstream classes. [#1967][1967]/[#2085][2085] by [@stuhood][@stuhood]
- Fixes classfile location detection. [#2214][2214] by [@stuhood][@stuhood]
- Fixes a few typos in keys descriptions. [#2092][2092] by [@pdalpra][@pdalpra]
- Avoids the use of `ListBuffer#readOnly`. [#2095][2095] by [@adriaanm][@adriaanm]
- Expands transitive dependency exclusions when using sbt-maven-resolver-plugin [#2109][2109] by [@jsuereth][@jsuereth]
- Fixes incremental compilation of traits by including private members into the API hash. [#2155][2155]/[#2160][2160] by
  [@Duhemm][@Duhemm]
- Fixes name hashing by removing class private members from the hash. [#2324][2324]/[#2325][2325] by [@gkossakowski][@gkossakowski]
- Fixes name hashing error messages. [#2158][2158] by [@stuhood][@stuhood]
- Adds more robustness to `tasks` and `settings` command. [#2192][2192] by [@DavidPerezIngeniero][@DavidPerezIngeniero]
- Fixes Java compilation inconsistencies between sbt and `javac` by always failing if the local Java compiler reported errors. [#2228][2228]/[#2271][2271] by [@Duhemm][@Duhemm]
- Fixes `JavaErrorParser` to parse non-compile-errors [#2256][2256]/[#2272][2272] by [@Duhemm][@Duhemm]
- Fixes launcher configuration to add `sbt-ivy-snapshots` repository to resolve nightly builds. [@eed3si9n][@eed3si9n]
- Fixes performance issues during tree traversal in the incremental compiler. [#2343][2343] by [@adriaanm][@adriaanm]
- Fixes the tracking of self types and F-bounded existential types in the incremental compiler. [#2343][2343] by [@adriaanm][@adriaanm]
- Avoid CCE when scalac internally uses `compileLate`. [#2453][2453] by [@retronym][@retronym]
- Fixes the memory-related options overriding `SBT_OPTS`. [sbt/sbt-launcher-package#101][101] by [@eed3si9n][@eed3si9n]

### Configurable Scala compiler bridge

sbt 0.13.11 adds `scalaCompilerBridgeSource` setting to specify the compiler brigde source. This allows different implementation of the bridge for Scala versions, and also allows future versions of Scala compiler implementation to diverge. The source module will be retrieved using library management configured by `bootIvyConfiguration` task.

[#2106][2106]/[#2197][2197]/[#2336][2336] by [@Duhemm][@Duhemm]

### Dotty awareness

sbt 0.13.11 will assume that Dotty is used when `scalaVersion` starts with `0.`.
The built-in compiler bridge in sbt does not support Dotty,
but a separate compiler bridge is being developed at [smarter/dotty-bridge](https://github.com/smarter/dotty-bridge) and
an example project that uses it is available at [smarter/dotty-example-project](https://github.com/smarter/dotty-example-project).

[#2344][2344] by [@smarter][@smarter]

### Inter-project dependency tracking

sbt 0.13.11 adds `trackInternalDependencies` and `exportToInternal` settings. These can be used to control whether to trigger compilation of a dependent subprojects when you call `compile`. Both keys will take one of three values: `TrackLevel.NoTracking`, `TrackLevel.TrackIfMissing`, and `TrackLevel.TrackAlways`. By default they are both set to `TrackLevel.TrackAlways`.

When `trackInternalDependencies` is set to `TrackLevel.TrackIfMissing`, sbt will no longer try to compile internal (inter-project) dependencies automatically, unless there are no `*.class` files (or JAR file when `exportJars` is `true`) in the output directory. When the setting is set to `TrackLevel.NoTracking`, the compilation of internal dependencies will be skipped. Note that the classpath will still be appended, and dependency graph will still show them as dependencies. The motivation is to save the I/O overhead of checking for the changes on a build with many subprojects during development. Here's how to set all subprojects to `TrackIfMissing`.

    lazy val root = (project in file(".")).
      aggregate(....).
      settings(
        inThisBuild(Seq(
          trackInternalDependencies := TrackLevel.TrackIfMissing,
          exportJars := true
        ))
      )

The `exportToInternal` setting allows the dependee subprojects to opt out of the internal tracking, which might be useful if you want to track most subprojects except for a few. The intersection of the `trackInternalDependencies` and `exportToInternal` settings will be used to determine the actual track level. Here's an example to opt-out one project:

    lazy val dontTrackMe = (project in file("dontTrackMe")).
      settings(
        exportToInternal := TrackLevel.NoTracking
      )

[#2266][2266]/[#2354][2354] by [@eed3si9n][@eed3si9n]

### Def.settings

Using `Def.settings` it is now possible to nicely define settings as such:

    val modelSettings = Def.settings(
      sharedSettings,
      libraryDependencies += foo
    )

[#2151][2151] by [@dwijnand][@dwijnand]

## sbt 0.13.10

sbt 0.13.10 did not happen due a bug that was found after the artifact was published.

## sbt 0.13.9

  [@cunei]: https://github.com/cunei
  [@eed3si9n]: https://github.com/eed3si9n
  [@gkossakowski]: https://github.com/gkossakowski
  [@jsuereth]: https://github.com/jsuereth
  [@dwijnand]: http://github.com/dwijnand
  [@ajsquared]: https://github.com/ajsquared
  [@jroper]: https://github.com/jroper
  [@kamilkloch]: https://github.com/kamilkloch
  [@DavidPerezIngeniero]: https://github.com/DavidPerezIngeniero
  [@PanAeon]: https://github.com/PanAeon
  [@asflierl]: http://github.com/asflierl
  [@matthewfarwell]: http://github.com/matthewfarwell
  [SI9027]: https://issues.scala-lang.org/browse/SI-9027
  [1950]: https://github.com/sbt/sbt/pull/1950
  [1987]: https://github.com/sbt/sbt/pull/1987
  [1970]: https://github.com/sbt/sbt/pull/1970
  [1960]: https://github.com/sbt/sbt/pull/1960
  [1562]: https://github.com/sbt/sbt/issues/1562
  [1900]: https://github.com/sbt/sbt/issues/1900
  [1940]: https://github.com/sbt/sbt/pull/1940
  [1922]: https://github.com/sbt/sbt/pull/1922
  [1721]: https://github.com/sbt/sbt/issues/1721
  [2014]: https://github.com/sbt/sbt/issues/2014
  [2030]: https://github.com/sbt/sbt/pull/2030
  [1998]: https://github.com/sbt/sbt/issues/1998
  [2000]: https://github.com/sbt/sbt/pull/2000
  [1828]: https://github.com/sbt/sbt/issues/1828
  [1992]: https://github.com/sbt/sbt/pull/1992
  [1961]: https://github.com/sbt/sbt/issues/1961
  [1223]: https://github.com/sbt/sbt/issues/1223
  [1773]: https://github.com/sbt/sbt/pull/1773
  [2028]: https://github.com/sbt/sbt/issues/2028
  [1651]: https://github.com/sbt/sbt/issues/1651
  [1990]: https://github.com/sbt/sbt/pull/1990
  [1847]: https://github.com/sbt/sbt/issues/1847
  [1989]: https://github.com/sbt/sbt/pull/1989
  [1856]: https://github.com/sbt/sbt/issues/1856
  [1877]: https://github.com/sbt/sbt/issues/1877
  [2035]: https://github.com/sbt/sbt/pull/2035
  [2001]: https://github.com/sbt/sbt/issues/2001
  [2027]: https://github.com/sbt/sbt/pull/2027
  [1666]: https://github.com/sbt/sbt/issues/1666
  [2068]: https://github.com/sbt/sbt/pull/2068
  [2005]: https://github.com/sbt/sbt/issues/2005
  [2075]: https://github.com/sbt/sbt/pull/2075
  [1973]: https://github.com/sbt/sbt/issues/1973
  [2006]: https://github.com/sbt/sbt/pull/2006
  [2008]: https://github.com/sbt/sbt/issues/2008
  [2009]: https://github.com/sbt/sbt/pull/2009
  [2046]: https://github.com/sbt/sbt/issues/2046
  [2097]: https://github.com/sbt/sbt/pull/2097

### Fixes with compatibility implications

- Starting 0.13.9, `crossScalaVersions` default value is fixed back to the older 0.12.x behavior. See below for details.
- Starting 0.13.9, the generated POM files no longer include dependencies on source or javadoc jars obtained via `withSources()` or `withJavadoc()`. See below for details.
- Scala version is bumped to 2.10.5. This brings in the fix for [SI-9027][SI9027]: XML node sequence literal bug. [#1666][1666]/[#2068][2068] by [@eed3si9n][@eed3si9n]

### Improvements

- Adds `retrieveManaged` related improvements. See below for details.
- Adds `-=` and `--=` for settings and tasks, which are the opposites of `+=` and `++=`. [#1922][1922] by [@dwijnand][@dwijnand]
- Adds `inThisBuild`, similar to `inConfig`, to allow specifying multiple settings in `ThisBuild` scope. [#1847][1847]/[#1989][1989] by [@dwijnand][@dwijnand]
- Adds a nicer toString to SimpleCommand to make it more human-friendly. [#1998][1998]/[#2000][2000] by [@dwijnand][@dwijnand]
- Adds `forceUpdatePeriod` key, that takes values of `Option[FiniteDuration]`.  If set, a full `update` will occur after that amount of time without needing to explicitly run the `update` task. By [@ajsquared][@ajsquared]
- Updates `ForkError.getMessage()` to include exception's original name. [#2028][2028] by [@kamilkloch][@kamilkloch]
- Adds help message for `inspect actual`. [#1651][1651]/[#1990][1990] by [@dwijnand][@dwijnand]
- Supports excluding tests in `testOnly`/`testQuick` with `-`, for example `-MySpec`.
  [#1970][1970] by [@matthewfarwell][@matthewfarwell]
- Adds more diagnostic info for underfined settings.
  [#2008][2008]/[#2009][2009] by [@DavidPerezIngeniero][@DavidPerezIngeniero]
- Adds an `Extracted.runInputTask` helper to assist with imperatively executing input tasks. [#2006][2006] by [@jroper][@jroper]
- Renames `distinct` method on `PathFinder` to `distinctName`. [#1973][1973] by [@eed3si9n][@eed3si9n]
- Adds `distinctPath` method on `PathFinder`. [#1973][1973] by [@eed3si9n][@eed3si9n]

### Bug fixes

- Fixes memory/performance issue with cached resolution. See below.
- Correct incremental compile debug message for invalidated products [#1961][1961] by [@jroper][@jroper]
- Enables forced GC by default. See below.
- Fixes Maven compatibility to read `maven-metadata.xml`. See below.
- Captures errors on `help` command. [#1900][1900]/[#1940][1940] by [@DavidPerezIngeniero][@DavidPerezIngeniero]
- Prevents history command(s) from going into an infinite loop [#1562][1562] by [@PanAeon][@PanAeon]
- Honors overwrite flag when publishing locally. [#1960][1960] by [@asflierl][@asflierl]
- Fixes a certain class of pom corruption that can occur in the presence of parent-poms. [#1856][1856] by [@jsuereth][@jsuereth]
- Adds dependency-level exclusions in the POM for project-level exclusions. [#1877][1877]/[#2035][2035] by [@dwijnand][@dwijnand]

### `crossScalaVersions` default value

As of this fix `crossScalaVersions` returns to the behaviour present in `0.12.4` whereby it defaults to what
`scalaVersion` is set to, for example if `scalaVersion` is set to `"2.11.6"`, `crossScalaVersions` now defaults
to `Seq("2.11.6")`.

Therefore when upgrading from any version between `0.13.0` and `0.13.8` be aware of this new default if
your build setup depended on it.

[#1828][1828]/[#1992][1992] by [@dwijnand][@dwijnand]

### POM files no longer include certain source and javadoc jars

When declaring library dependencies using the withSources() or withJavadoc() options, sbt was also including
in the pom file, as dependencies, the source or javadoc jars using the default Maven scope. Such dependencies
might be erroneously processed as they were regular jars by automated tools

[#2001][2001]/[#2027][2027] by [@cunei][@cunei]

### `retrieveManaged` related improvements

sbt 0.13.9 adds `retrieveManagedSync` key that, when set to `true`, enables synchronizing retrieved to the current build by removed unneeded files.

It also adds `configurationsToRetrieve` key, that takes values of `Option[Set[Configuration]]`. If set, when `retrieveManaged` is true only artifacts in the specified configurations will be retrieved to the current build. 

[#1950][1950]/[#1987][1987] by [@ajsquared][@ajsquared]

### Cached resolution fixes

On a larger dependency graph, the JSON file growing to be 100MB+
with 97% of taken up by *caller* information.
To make the matter worse, these large JSON files were never cleaned up.

sbt 0.13.9 filters out artificial or duplicate callers,
which fixes `OutOfMemoryException` seen on some builds.
This generally shrinks the size of JSON, so it should make the IO operations faster.
Dynamic graphs will be rotated with directories named after `yyyy-mm-dd`,
and stale JSON files will be cleaned up after few days.

sbt 0.13.9 also fixes a correctness issue that was found in the earlier releases.
Under some circumstances, libraries that shouldn't have been evicted was being evicted.
This occured when library `A1` depended on `B2`, but a newer `A2` dropped the dependency,
and `A2` and `B1` are also is in the graph. This is fixed by sorting the graph prior to eviction.

[#2030][2030]/[#1721][1721]/[#2014][2014]/[#2046][2046]/[#2097][2097] by [@eed3si9n][@eed3si9n]

### Force GC

[@cunei][@cunei] in [#1223][1223] discovered that sbt leaks PermGen
when it creates classloaders to call Scala Compilers.
sbt 0.13.9 will call GC on a set interval (default: 60s).
It will also call GC right before cross building.
This behavior can diabled using by setting false to `forcegc`
setting or `sbt.task.forcegc` flag.

[#1773][1773] by [@eed3si9n][@eed3si9n]

### Maven compatibility fix

To resolve dynamic versions such as `SNAPSHOT` and version ranges, the dependency resolution engine
queries for the list of available versions.
For Maven repositories, it was supposed read `maven-metadata.xml` first, but
because sbt customizes the repository layout for cross building, it has been falling back
to screen scraping of the Apache directory listing.
This problem surfaced as:

- Version range not working for artifacts hosted on Bintray. [#2005][2005]
- Potentially other `SNAPSHOT` related issues.

sbt 0.13.9 fixes this by relaxing the Maven compatiblity check, so it will read `maven-metadata.xml`. [#2075][2075] by [@eed3si9n][@eed3si9n]

## sbt 0.13.8

  [@cunei]: https://github.com/cunei
  [@eed3si9n]: https://github.com/eed3si9n
  [@gkossakowski]: https://github.com/gkossakowski
  [@jsuereth]: https://github.com/jsuereth

  [@aerskine]: https://github.com/aerskine
  [@ajozwik]: https://github.com/ajozwik
  [@dwickern]: https://github.com/dwickern
  [@dwijnand]: http://github.com/dwijnand
  [@Duhemm]: https://github.com/Duhemm
  [@kretes]: https://github.com/kretes
  [@indrajitr]: https://github.com/indrajitr
  [@j-keck]: https://github.com/j-keck
  [@xuwei-k]: https://github.com/xuwei-k
  [SI-9027]: https://issues.scala-lang.org/browse/SI-9027
  [Custom-Settings0]: http://www.scala-sbt.org/0.13/tutorial/Custom-Settings.html
  [321]: https://github.com/sbt/sbt/issues/321
  [647]: https://github.com/sbt/sbt/issues/647
  [679]: https://github.com/sbt/sbt/issues/679
  [875]: https://github.com/sbt/sbt/issues/875
  [1001]: https://github.com/sbt/sbt/issues/1001
  [1180]: https://github.com/sbt/sbt/issues/1180
  [1322]: https://github.com/sbt/sbt/issues/1322
  [1340]: https://github.com/sbt/sbt/pull/1340
  [1542]: https://github.com/sbt/sbt/issues/1542
  [1615]: https://github.com/sbt/sbt/issues/1615
  [1616]: https://github.com/sbt/sbt/issues/1616
  [1634]: https://github.com/sbt/sbt/pull/1634
  [1655]: https://github.com/sbt/sbt/issues/1655
  [1676]: https://github.com/sbt/sbt/issues/1676
  [1702]: https://github.com/sbt/sbt/pull/1702
  [1711]: https://github.com/sbt/sbt/issues/1711
  [1714]: https://github.com/sbt/sbt/issues/1714
  [1738]: https://github.com/sbt/sbt/issues/1738
  [1741]: https://github.com/sbt/sbt/pull/1741
  [1746]: https://github.com/sbt/sbt/pull/1746
  [1748]: https://github.com/sbt/sbt/issues/1748
  [1752]: https://github.com/sbt/sbt/pull/1752
  [1754]: https://github.com/sbt/sbt/pull/1754
  [1760]: https://github.com/sbt/sbt/pull/1760
  [1765]: https://github.com/sbt/sbt/pull/1765
  [1766]: https://github.com/sbt/sbt/pull/1766
  [1771]: https://github.com/sbt/sbt/pull/1771
  [1787]: https://github.com/sbt/sbt/pull/1787
  [1793]: https://github.com/sbt/sbt/pull/1793
  [1799]: https://github.com/sbt/sbt/pull/1799
  [1817]: https://github.com/sbt/sbt/pull/1817
  [1818]: https://github.com/sbt/sbt/pull/1818
  [1869]: https://github.com/sbt/sbt/issues/1869
  [1871]: https://github.com/sbt/sbt/pull/1871
  [1885]: https://github.com/sbt/sbt/issues/1885
  [1881]: https://github.com/sbt/sbt/issues/1881
  [1899]: https://github.com/sbt/sbt/pull/1899
  [1902]: https://github.com/sbt/sbt/pull/1902
  [1921]: https://github.com/sbt/sbt/issues/1921

### Changes with compatibility implications

- Disable publishing on implicitly created root project by not enabling `IvyPlugin` by default (`-Dsbt.root.ivyplugin=true` will revert this behavior). [#1871][1871]/[#1869][1869] by [@dwijnand][@dwijnand]
- Rolls back XML parsing workaround. See below.
- Enables cross-version support for Scala sources. See below.

### Improvements

- Adds Maven resolver plugin. See below.
- Adds project-level dependency exclusions. See below.
- Adds sequential tasks. See below.
- Discovered main classes will be sorted. [#1180][1180] by [@kretes][@kretes]
- Implemented a new mechanism of forking javac, whereby errors are captured.  Also more likely to run in-process. [#1702][1702] by [@jsuereth][@jsuereth]
- `evicted` will display all evictions (including the ones not suspected of binary incompatibility). [#1615][1615] by [@eed3si9n][@eed3si9n]
- Better abstration to track new kinds of dependencies for incremental compiler. [#1340][1340] by [@Duhemm][@Duhemm]
- Source dependency uses `--depth 1` for git clone. [#1787][1787] by [@xuwei-k][@xuwei-k]
- Facilitate nicer ways of declaring project settings. See below. [#1902][1902] by [@dwijnand][@dwijnand]

### Fixes

- Javac warnings are treated as warnings.  [#1702][1702]/[#875][875] by [@jsuereth][@jsuereth]
- `compilerReporter` is fed to javac during incremental compilation. [#1542][1542] by [@jsuereth][@jsuereth]
- Ignores hidden build files from the build. [#1746][1746] by [@j-keck][@j-keck]
- Fixes build.sbt parsing of multiple import. [#1741][1741] by [@ajozwik][@ajozwik]
- Fixes ANSI escape code for overwriting lines on Windows. [#1771][1771] by [@dwickern][@dwickern]
- Adds null check in incremental compiler's type tree extraction. [#1754][1754]/[#1655][1655] by [@Duhemm][@Duhemm]
- sbt doesn't honor Maven's uniqueVersions (use sbt-maven-resolver to fix). [#1322][1322]  by [@jsuereth][@jsuereth]
- sbt doesn't see new SNAPSHOT dependency versions in local maven repos (use withLatestSnapshots + sbt-maven-resolver to fix) [#321][321] by [@jsuereth][@jsuereth]
- Property in pom's version field results to wrong dependency resolution (use sbt-maven-resolver to fix). [#647][647] by [@jsuereth][@jsuereth]
- Maven local resolver with parent POM (use sbt-maven-resolver). [#1616][1616] by [@jsuereth][@jsuereth]
- Fixes eviction warning being too noisy. [#1615][1615] by [@eed3si9n][@eed3si9n]
- Issues warning if multiple dependencies to a same library is found with different version. [#1634][1634] by [@eed3si9n][@eed3si9n]
- Removes "No main class detected" warning. [#1766][1766] by [@eed3si9n][@eed3si9n]
- Fixes sporadic ConcurrentModificationException from JUnitXmlTestsListener. [#1881][1881] by [@aerskine][@aerskine]
- Fixes handling of ANSI CSI codes. [#1885][1885] by [@jsuereth][@jsuereth]
- Exempt org.scala-lang:scala-actors-migration and org.scala-lang:scala-pickling from scala binary version checks. [#1818][1818]/[#1899][1899] by [@dwijnand][@dwijnand]
- Fixes cached resolution handling of internal depdendencies. [#1711][1711] by [@eed3si9n][@eed3si9n]
- Fixes cached resolution being too verbose. [#1752][1752] by [@eed3si9n][@eed3si9n]
- Fixes cached resolution not evicting modules transitively. [#1760][1760] by [@eed3si9n][@eed3si9n]

### Rolling back XML parsing workaround

sbt 0.13.7 implemented natural whitespace handling by switching `build.sbt` parsing to use Scala compiler, instead of blank line delimiting. We realized that some build definitions no longer parsed due to the difference in XML handling.

    val a = <x/><y/>
    val b = 0

At the time, we thought adding parentheses around XML nodes could work around this behavior. However, the workaround has caused [more issues][1738], and since then we have realized that this is a compiler issue [SI-9027][SI-9027], so we have decided to roll back our workaround. In the meantime, if you have consecutive XML elements in your build.sbt, enclose them in `<xml:group>` tag, or parentheses.

    val a = <xml:group><x/><y/></xml:group>
    val b = 0

[#1765][1765] by [@ajozwik][@ajozwik]

### Cross-version support for Scala sources

When `crossPaths` setting is set to `true` (it is `true` by default), sbt 0.13.8 will include
`src/main/scala-<scalaBinaryVersion>/` to the `Compile` compilation in addition to
`src/main/scala`. For example, it will include `src/main/scala-2.11/` for Scala 2.11.5, and
`src/main/scala-2.9.3` for Scala 2.9.3. [#1799][1799] by [@indrajitr][@indrajitr]

### Maven resolver plugin

sbt 0.13.8 adds an extension point in the dependency resolution to customize Maven resolvers.
This allows us to write sbt-maven-resolver auto plugin, which internally uses Eclipse Aether
to resolve Maven dependencies instead of Apache Ivy.

To enable this plugin, add the following to `project/maven.sbt` (or `project/plugin.sbt` the file name doesn't matter):

    addMavenResolverPlugin

This will create a new `~/.ivy2/maven-cache` directory, which contains the Aether cache of files.
You may notice some file will be re-downloaded for the new cache layout.
Additionally, sbt will now be able to fully construct
`maven-metadata.xml` files when publishing to remote repositories or when publishing to the local `~/.m2/repository`.
This should help erase many of the deficiencies encountered when using Maven and sbt together.

**Notes and known limitations**:

- sbt-maven-resolver requires sbt 0.13.8 and above.
- The current implementation does not support Ivy-style dynamic revisions, such as "2.10.+" or "latest.snapshot".  This
  is a fixable situation, but the version range query and Ivy -> Maven version range translation code has not been migrated.
- The current implementation does not support Maven-style range revisions if found on transitive dependencies. [#1921][1921]

[#1793][1793] by [@jsuereth][@jsuereth]

### Project-level dependency exclusions

sbt 0.13.8 adds **experimental** project-level dependency exclusions:

    excludeDependencies += "org.apache.logging.log4j"
    excludeDependencies += "com.example" %% "foo"

In the first example, all artifacts from the organization `"org.apache.logging.log4j"` are excluded from the managed dependency.
In the second example, artifacts with the organization `"com.example"` and the name `"foo"` cross versioned to the current `scalaVersion` are excluded.

**Note**: This feature currently does not translate to `pom.xml`!

[#1748][1748] by [@eed3si9n][@eed3si9n]

### Sequential tasks

sbt 0.13.8 adds a new `Def.sequential` function to run tasks under semi-sequential semantics.
Here's an example usage:

    lazy val root = project.
      settings(
        testFile := target.value / "test.txt",
        sideEffect0 := {
          val t = testFile.value
          IO.append(t, "0")
          t
        },
        sideEffect1 := {
          val t = testFile.value
          IO.append(t, "1")
          t
        },
        foo := Def.sequential(compile in Compile, sideEffect0, sideEffect1, test in Test).value
      )

Normally sbt's task engine will reorder tasks based on the dependencies among the tasks,
and run as many tasks in parallel (See [Custom settings and tasks][Custom-Settings0] for more details on this).
`Def.sequential` instead tries to run the tasks in the specified order.
However, the task engine will still deduplicate tasks. For instance, when `foo` is executed, it will only compile once,
even though `test in Test` depends on compile. [#1817][1817]/[#1001][1001] by [@eed3si9n][@eed3si9n]

### Nicer ways of declaring project settings

Now a `Seq[Setting[_]]` can be passed to `Project.settings` without the needs for "varargs expansion", ie. `: _*`

Instead of:

    lazy val foo = project settings (sharedSettings: _*)

It is now possible to do:

    lazy val foo = project settings sharedSettings

Also, `Seq[Setting[_]]` can be declared at the same level as individual settings in `Project.settings`, for instance:

    lazy val foo = project settings (
      sharedSettings,
      version := "1.0",
      someMoreSettings
    )

[#1902][1902] by [@dwijnand][@dwijnand]

### Bytecode Enhancers

sbt 0.13.8 adds an extension point whereby users can effectively manipulate java bytecode (.class files) *before* the
incremental compiler attempts to cache the classfile hashes.  This allows libraries like ebean to function with sbt
without corrupting the compiler cache and rerunning compile every few seconds.

This splits the compile task into several subTasks:

1. `previousCompile`:  This task returns the previously persisted `Analysis` object for this project.
2. `compileIncremental`: This is the core logic of compiling Scala/Java files together.   This task actually does the
    work of compiling a project incrementally, including ensuring a minimum number of source files are compiled.
    After this method, all .class files that would be generated by scalac + javac will be available.
3. `manipulateByteCode`: This is a stub task which takes the `compileIncremental` result and returns it.
    Plugins which need to manipulate bytecode are expected to override this task with their own implementation, ensuring
    to call the previous behavior.
4. `compile`:  This task depends on `manipulateBytecode` and then persists the `Analysis` object containing all
    incremental compiler information.

Here's an example of how to hook the new `manipulateBytecode` key in your own plugin:

    manipulateBytecode in Compile := {
      val previous = (manipulateBytecode in Compile).value
      doManipulateBytecode(previous)  // Note: This must return a new Compiler.CompileResult with our changes.
    }

See [#1714][1714] for the full details of the implementation.

## sbt 0.13.7

  [Cached-Resolution]: Cached-Resolution.html
  [@cunei]: https://github.com/cunei
  [@eed3si9n]: https://github.com/eed3si9n
  [@gkossakowski]: https://github.com/gkossakowski
  [@jsuereth]: https://github.com/jsuereth
  [@ajozwik]: https://github.com/ajozwik
  [@copumpkin]: https://github.com/copumpkin
  [@Duhemm]: https://github.com/Duhemm
  [@jedesah]: https://github.com/jedesah
  [@rkrzewski]: https://github.com/rkrzewski
  [@tmandke]: https://github.com/tmandke
  [@topping]: https://github.com/topping
  [@WarsawScala]: https://github.com/WarsawScala
  [@kretes]: https://github.com/kretes
  [1237]: https://github.com/sbt/sbt/issues/1237
  [1430]: https://github.com/sbt/sbt/issues/1430
  [1544]: https://github.com/sbt/sbt/issues/1544
  [1563]: https://github.com/sbt/sbt/pull/1563
  [1572]: https://github.com/sbt/sbt/pull/1572
  [1573]: https://github.com/sbt/sbt/pull/1573
  [1579]: https://github.com/sbt/sbt/pull/1579
  [1584]: https://github.com/sbt/sbt/pull/1584
  [1586]: https://github.com/sbt/sbt/pull/1586
  [1589]: https://github.com/sbt/sbt/issues/1589
  [1590]: https://github.com/sbt/sbt/pull/1590
  [1591]: https://github.com/sbt/sbt/pull/1591
  [1598]: https://github.com/sbt/sbt/issues/1598
  [1600]: https://github.com/sbt/sbt/pull/1600
  [1601]: https://github.com/sbt/sbt/pull/1601
  [1602]: https://github.com/sbt/sbt/pull/1602
  [1606]: https://github.com/sbt/sbt/issues/1606
  [1607]: https://github.com/sbt/sbt/pull/1607
  [1611]: Https://github.com/sbt/sbt/issues/1611
  [1618]: https://github.com/sbt/sbt/pull/1618
  [1621]: https://github.com/sbt/sbt/pull/1621
  [1631]: https://github.com/sbt/sbt/pull/1631
  [1642]: https://github.com/sbt/sbt/pull/1642
  [1683]: https://github.com/sbt/sbt/pull/1683
  [1648]: https://github.com/sbt/sbt/pull/1648

### Fixes with compatibility implications

- Maven artifact dependencies will limit their transitive dependencies to `Compile` rather than *every configuration* if no `master` configuration is found. [#1586][1586] by [@jsuereth][@jsuereth]
- The new natural whitspace handling parser is unable to cope with certain classes of Scala syntax. In particular, top-level pattern matches, or multi-value defintions are no longer supported.

Here are examples:

```scala
val x, y = project // BAD
val x = project    // 
val y = project    //  GOOD
```

### Improvements

- Natural whitespace handling. See below. [#1606][1606] by [@rkrzewski][@rkrzewski], [@ajozwik][@ajozwik], and others at [@WarsawScala][@WarsawScala]
- Adds support for publishing to a custom Maven local repository. See below. [#1589][1589]/[#1600][1600] by [@topping][@topping]
- Adds circular dependency check. See below. [#1601][1601] by [@eed3si9n][@eed3si9n]
- Adds cached resolution (minigraph caching). See below. [#1631][1631] by [@eed3si9n][@eed3si9n]
- Allows the "-bin" Scala version suffix to specify a bincompat version. [#1573][1573] by [@cunei][@cunei]
- Adds support for publishing to file repositories specified in `~/.sbt/repositories`. [#1579][1579] by [@copumpkin][@copumpkin]
- Adds support for publishing to a Maven repository with `file` URLs. [#1618][1618] by [@jsuereth][@jsuereth]
- Don't hardcode existing relations in `TextAnalysisFormat`. [#1572][1572] by [@Duhemm][@Duhemm]
- Adds `developers` key. [#1590][1590] by [@jedesah][@jedesah]
- Will warn when none or multiple main classes detected. [#1648][1648] by [@kretes][@kretes]

### Bug fixes

- Fixes issues with specifying `scalaHome`/`scalaInstance` and running tests. [#1584][1584] by [@jsuereth][@jsuereth]
- Fixes StackOverflow error in dependencies extraction with macro and name hashing. [#1563][1563]/[#1642][1642]/[#1237][1237]/[#1544][1544] by [@Duhemm][@Duhemm]
- Fixes `set every`. [#1591][1591]/[#1430][1430] by [@cunei][@cunei]
- Ivy no longer silently flops to `HttpClient` resolver when httpclient is on the classpath. [#1602][1602] by [@jsuereth][@jsuereth]
- Backports Ivy fix to not throw exceptions when modules are evicted.  [#1607][1607]/[#1598][1598] by [@jsuereth][@jsuereth]
- When resolving from a Maven repository, and unable to read `maven-metadata.xml` file (common given the divergence in
  Maven 3 and Ivy 2), we attempt to use `LastModified` timestamp in lieu of "published" timestamp.  
  [#1611][1611]/[#1618][1618] by [@jsuereth][@jsuereth]
- Fixes NullPointerException when using `ChainResolver` and Maven repositories. [#1611][1611]/[#1618][1618] by [@jsuereth][@jsuereth]
- Fixes `Resolver`'s `url` method dropping `descriptorOptional` and `skipConsistencyCheck`. [#1621][1621] by [@tmandke][@tmandke]
- Revert `useLatestSnapshot` on `updateOptions` to default to `false`.  Reverts chain resolver to previous behavior.  [#1683][1683] by [@jsuereth][@jsuereth]

### Natural whitespace handling

Starting sbt 0.13.7, build.sbt will be parsed using a customized Scala parser. This eliminates the requirement to use blank line as the delimiter between each settings, and also allows blank lines to be inserted at arbitrary position within a block.

This feature can be disabled, if necessary, via the -Dsbt.parser.simple=true flag.

This feature was contributed by [Andrzej Jozwik (@ajozwik)](https://github.com/ajozwik), [Rafał Krzewski (@rkrzewski)][@rkrzewski] and others at [@WarsawScala][@WarsawScala] inspired by Typesafe's [@gkossakowski][@gkossakowski] organizing multiple [meetups](http://blog.japila.pl/2014/07/gkossakowski-on-warszawscala-about-how-to-patch-scalasbt/) and [hackathons](http://blog.japila.pl/2014/07/hacking-scalasbt-with-gkossakowski-on-warszawscala-meetup-in-javeo_eu/) on how to patch sbt with the focus on this blank line issue. Dziękujemy! [#1606][1606]

### Custom Maven local repository location

Maven local repository is now resolved from the first of:

- `<localRepository/>` element in `~/.m2/settings.xml`
- `<localRepository/>` element in `\$M2_HOME/conf/settings.xml`, or
- the default of `~/.m2/repository` if neither of those configuration elements exist

If more Maven settings are required to be recovered, the proper thing to do is merge the two possible `settings.xml` files, then query against the element path of the merge. This code avoids the merge by checking sequentially.

[#1589][1589]/[#1600][1600] by [@topping][@topping]

### Circular dependency

By default circular dependencies are warned, but they do not halt the dependency resolution. Using the following setting, circular dependencies can be treated as an error.

    updateOptions := updateOptions.value.withCircularDependencyLevel(CircularDependencyLevel.Error)

[#1601][1601] by [@eed3si9n][@eed3si9n]

### Cached resolution (minigraph caching)

sbt 0.13.7 adds a new **experimental** update option called *cached resolution*, which replaces consolidated resolution:

    updateOptions := updateOptions.value.withCachedResolution(true)

Unlike consolidated resolution, which only consolidated subprojects with identical dependency graph, cached resolution create an artificial graph for each direct dependency (minigraph) for all subprojects, resolves them independently, saves them into json file, and stiches the minigraphs together.

Once the minigraphs are resolved and saved as files, dependency resolution turns into a matter of loading json file from the second run onwards, which should complete in a matter of seconds even for large projects. Also, because the files are saved under a global `~/.sbt/0.13/dependency` (or what's specified by `sbt.dependency.base` flag), the resolution result is shared across all builds.

Breaking graphs into minigraphs allows partial resolution results to be shared, which scales better for subprojects with similar but slightly different dependencies, and also for making small changes to the dependencies graph over time. See [documentation on cached resolution][Cached-Resolution] for more details.

[#1631][1631] by [@eed3si9n][@eed3si9n]

## sbt 0.13.6

  [413]: https://github.com/sbt/sbt/issues/413
  [528]: https://github.com/sbt/sbt/issues/528
  [670]: https://github.com/sbt/sbt/issues/670
  [856]: https://github.com/sbt/sbt/issues/856
  [1036]: https://github.com/sbt/sbt/pull/1036
  [1059]: https://github.com/sbt/sbt/issues/1059
  [1181]: https://github.com/sbt/sbt/issues/1181
  [1194]: https://github.com/sbt/sbt/issues/1194
  [1200]: https://github.com/sbt/sbt/issues/1200
  [1213]: https://github.com/sbt/sbt/issues/1213
  [1275]: https://github.com/sbt/sbt/issues/1275
  [1312]: https://github.com/sbt/sbt/pull/1312
  [1313]: https://github.com/sbt/sbt/pull/1313
  [1315]: https://github.com/sbt/sbt/issues/1315
  [1330]: https://github.com/sbt/sbt/pull/1330
  [1346]: https://github.com/sbt/sbt/pull/1346
  [1347]: https://github.com/sbt/sbt/issues/1347
  [1352]: https://github.com/sbt/sbt/pull/1352
  [1358]: https://github.com/sbt/sbt/pull/1358
  [1366]: https://github.com/sbt/sbt/issues/1366
  [1367]: https://github.com/sbt/sbt/pull/1367
  [1378]: https://github.com/sbt/sbt/pull/1378
  [1383]: https://github.com/sbt/sbt/pull/1383
  [1384]: https://github.com/sbt/sbt/issues/1384
  [1400]: https://github.com/sbt/sbt/pull/1400
  [1401]: https://github.com/sbt/sbt/pull/1401
  [1405]: https://github.com/sbt/sbt/pull/1405
  [1409]: https://github.com/sbt/sbt/pull/1409
  [1416]: https://github.com/sbt/sbt/issues/1416
  [1419]: https://github.com/sbt/sbt/pull/1419
  [1422]: https://github.com/sbt/sbt/issues/1422
  [1423]: https://github.com/sbt/sbt/pull/1423
  [1426]: https://github.com/sbt/sbt/pull/1426
  [1433]: https://github.com/sbt/sbt/pull/1433
  [1439]: https://github.com/sbt/sbt/issues/1439
  [1447]: https://github.com/sbt/sbt/pull/1447
  [1450]: https://github.com/sbt/sbt/pull/1450
  [1451]: https://github.com/sbt/sbt/pull/1451
  [1454]: https://github.com/sbt/sbt/pull/1454
  [1456]: https://github.com/sbt/sbt/pull/1456
  [1467]: https://github.com/sbt/sbt/pull/1467
  [1476]: https://github.com/sbt/sbt/pull/1476
  [1477]: https://github.com/sbt/sbt/pull/1477
  [1484]: https://github.com/sbt/sbt/issues/1484
  [1486]: https://github.com/sbt/sbt/pull/1486
  [1487]: https://github.com/sbt/sbt/pull/1487
  [1488]: https://github.com/sbt/sbt/pull/1488
  [1489]: https://github.com/sbt/sbt/pull/1489
  [1494]: https://github.com/sbt/sbt/pull/1494
  [1516]: https://github.com/sbt/sbt/pull/1516
  [1465]: https://github.com/sbt/sbt/issues/1465
  [1514]: https://github.com/sbt/sbt/issues/1514
  [1524]: https://github.com/sbt/sbt/issues/1524
  [1530]: https://github.com/sbt/sbt/issues/1530
  [1536]: https://github.com/sbt/sbt/pull/1536
  [1541]: https://github.com/sbt/sbt/issues/1541
  [1546]: https://github.com/sbt/sbt/pull/1546

  [@benmccann]: https://github.com/benmccann
  [@dansanduleac]: https://github.com/dansanduleac
  [@2m]: https://github.com/2m
  [@pvlugter]: https://github.com/pvlugter
  [@eed3si9n]: https://github.com/eed3si9n
  [@evgeny-goldin]: https://github.com/evgeny-goldin
  [@gkossakowski]: https://github.com/gkossakowski
  [@jsuereth]: https://github.com/jsuereth
  [@benjyw]: https://github.com/benjyw
  [@xuwei-k]: https://github.com/xuwei-k
  [@jroper]: https://github.com/jroper
  [@lpiepiora]: https://github.com/lpiepiora
  [@vn971]: https://github.com/vn971
  [@dpratt]: https://github.com/dpratt
  [@henrikengstrom]: https://github.com/henrikengstrom
  [@puffnfresh]: https://github.com/puffnfresh
  [@rtyley]: https://github.com/rtyley

### Fixes with compatibility implications

- Maven Central Repository, Java.net Maven 2 Repository, Typesafe Repository, and sbt Plugin repository now defaults to HTTPS. (See below)
- `ThisProject` used to resolve to the root project in a build even when it's place in `subproj/build.sbt`. sbt 0.13.6 fixes it to resolve to the sub project. [#1194][1194]/[#1358][1358] by [@dansanduleac][@dansanduleac]
- Global plugins classpath used to be injected into every build. This will no longer be the case. [#1347][1347]/[#1352][1352] by [@dansanduleac][@dansanduleac]
- Fixes `newer` command in scripted. [#1419][1419] by [@jroper][@jroper]
- Name hashing is enabled by default. `inc.Analysis.empty` also defaults to the one compatible with name hashing. [#1546][1546] by [@gkossakowski][@gkossakowski]

### Improvements

- Derived settings can replace previously-defined but non-default settings. [#1036][1036] by [@dansanduleac][@dansanduleac]
- Sorts setting key names in the inspect tree view. [#1313][1313] by [@2m][@2m]
- Uses separate update caches when cross compiling scala. [#1330][1330] by [@pvlugter][@pvlugter]
- Ensures sequences in analysis files are read in order. [#1346][1346] by [@benjyw][@benjyw]
- Enables tab completion for scripted task. [#1383][1383] by [@xuwei-k][@xuwei-k]
- Allows project reference to to a branch of a local git repository. [#1409][1409] by [@vn971][@vn971]
- Triggered Execution is now aware of rename or move of files. [#1401][1401] by [@xuwei-k][@xuwei-k]
- No longer updates classifiers of `projectDependencies`. [#1366][1366]/[#1367][1367] by [@dansanduleac][@dansanduleac]
- Selects the first test fingerprint for a test name for forked tests. [#1450][1450] by [@pvlugter][@pvlugter]
- Allows default auto plugins to be disabled. [#1451][1451] by [@jsuereth][@jsuereth]
- Allows keys defined inside `build.sbt` to be used from sbt shell. [#1059][1059]/[#1456][1456]
- Updates internal Ivy instance to cache the results of dependency exclusion rules. [#1476][1476] by [@eed3si9n][@eed3si9n]
- Adds `Resolver.jcenterRepo` and `Resolver.bintrayRepo(owner, repo)` to add Bintray easier. [#1405][1405] by [@evgeny-goldin][@evgeny-goldin]
- AutoPlugins with no requirements enabled by allRequirements can now be disable dby the user. [#1516][1516] by [@jsuereth][@jsuereth]

### Bug fixes

- Allows auto-generated projects to have overridden organization. [#1315][1315]/[#1378][1378] by [@jsuereth][@jsuereth]
- Fixes auto plugins declared without package object. [#1423][1423] by [@lpiepiora][@lpiepiora]
- Fixes `plugin` command. [#1416][1416]/[#1426][1426] by [@lpiepiora][@lpiepiora]
- Adds `scala-jar` to the list of jar artifacts recognized by CustomPomParser. [#1400][1400] by [@dpratt][@dpratt]
- Fixes cross versioning to recognize version number with mutiple -tags. [#1433][1433] by [@henrikengstrom][@henrikengstrom]
- Works around "Not a simple type" breaking `-Xfatal-warnings`. [#1477][1477] by [@puffnfresh][@puffnfresh]
- Fixes sLog usage in tandem with the `set` comamnd [#1486][1486] [@jsuereth][@jsuereth]
- Test suites with whitespace will have prettier filenames [#1487][1487] [@jsuereth][@jsuereth]
- sbt no longer crashes when run in root directory [#1488][1488] by [@jsuereth][@jsuereth]
- set no longer removes any `++` scala version setting.  [#856][856]/[#1489][1489] by [@jsuereth][@jsuereth]
- Fixes `Scope.parseScopedKey`. [#1384][1384] by [@eed3si9n][@eed3si9n]
- Fixes `build.sbt` errors causing `ArrayIndexOutOfBoundsException` due to invalid source in position. [#1181][1181] by [@eed3si9n][@eed3si9n]
- Fixes `http.proxyPassword` showing up in launcher's update.log. [#670][670] by [@eed3si9n][@eed3si9n]
- Fixes config-classes leak in loading build files. [#1524][1524] by [@jsuereth][@jsuereth]
- Fixes name-conflicts in hashed settings class files. [#1465][1465] by [@jsuereth][@jsuereth]
- Fixes the pom conversion of dynamic revisions like `1.1+`. [#1275][1275] by [@eed3si9n][@eed3si9n]
- Fixes `NullPointerError` in tab completion by `FileExamples`. [#1530][1530] by [@eed3si9n][@eed3si9n]
- Fixes metabuild downloading unused Scala 2.10.2. [#1439][1439] by [@eed3si9n][@eed3si9n]

### HTTPS related changes

Thanks to Sonatype, HTTPS access to Maven Central Repository is available to public. This is now enabled by default, but if HTTP is required for some reason the following system properties can be used:

    -Dsbt.repository.secure=false

Java.net Maven 2 repository, Typesafe repository, and sbt Plugin repository also defaults to HTTPS.

[#1494][1494] by [@rtyley][@rtyley], [#1536][1536] by [@benmccann][@benmccann], and [#1541][1541] by [@eed3si9n][@eed3si9n].

### enablePlugins/disablePlugins

sbt 0.13.6 now allows `enablePlugins` and `disablePlugins` to be written directly in `build.sbt`. [#1213][1213]/[#1312][1312] by [@jsuereth][@jsuereth]

### Unresolved dependencies error

sbt 0.13.6 will try to reconstruct dependencies tree when it fails to resolve a managed dependency.
This is an approximation, but it should help you figure out where the problematic dependency is coming from. When possible sbt will display the source position next to the modules:

    [warn]  ::::::::::::::::::::::::::::::::::::::::::::::
    [warn]  ::          UNRESOLVED DEPENDENCIES         ::
    [warn]  ::::::::::::::::::::::::::::::::::::::::::::::
    [warn]  :: foundrylogic.vpp#vpp;2.2.1: not found
    [warn]  ::::::::::::::::::::::::::::::::::::::::::::::
    [warn] 
    [warn]  Note: Unresolved dependencies path:
    [warn]      foundrylogic.vpp:vpp:2.2.1
    [warn]        +- org.apache.cayenne:cayenne-tools:3.0.2
    [warn]        +- org.apache.cayenne.plugins:maven-cayenne-plugin:3.0.2 (/foo/some-test/build.sbt#L28)
    [warn]        +- d:d_2.10:0.1-SNAPSHOT

[#528][528]/[#1422][1422]/[#1447][1447] by [@eed3si9n][@eed3si9n]

### Eviction warnings

sbt 0.13.6 displays eviction warnings when it resolves your project's managed dependencies via `update` task.
Currently the eviction warnings are categorized into three layers: `scalaVersion` eviction, direct evictions, and transitive evictions.
By default eviction warning on `update` task will display only `scalaVersion` evictin and direct evictions.

`scalaVersion` eviction warns you when `scalaVersion` is no longer effecitive. This happens when one of your dependency depends on a newer release of scala-library than your `scalaVersion`.
Direct evctions are evictions related to your direct dependencies. Warnings are displayed only when API incompatibility is suspected. For Java libraries, Semantic Versioning is used for guessing, and for Scala libraries Second Segment versioning (second segment bump makes API incompatible) is used.

To display all eviction warnings with caller information, run `evicted` task.

    [warn] There may be incompatibilities among your library dependencies.
    [warn] Here are some of the libraries that were evicted:
    [warn]     * com.typesafe.akka:akka-actor_2.10:2.1.4 -> 2.3.4 (caller: com.typesafe.akka:akka-remote_2.10:2.3.4,
    org.w3:banana-sesame_2.10:0.4, org.w3:banana-rdf_2.10:0.4)

[#1200][1200]/[#1467][1467] by [@eed3si9n][@eed3si9n]

### Latest SNAPSHOTs

sbt 0.13.6 adds a new setting key called `updateOptions` for customizing the details of managed dependency resolution with `update` task. One of its flags is called `lastestSnapshots`, which controls the behavior of the chained resolver. Up until 0.13.6, sbt was picking the first `-SNAPSHOT` revision it found along the chain. When `latestSnapshots` is enabled (default: `true`), it will look into all resolvers on the chain, and compare them using the publish date.

The tradeoff is probably a longer resolution time if you have many remote repositories on the build or you live away from the severs. So here's how to disable it:

    updateOptions := updateOptions.value.withLatestSnapshots(false)

[#1514][1514] by [@eed3si9n][@eed3si9n]

### Consolidated resolution

`updateOptions` can also be used to enable consolidated resolution for `update` task.

    updateOptions := updateOptions.value.withConsolidatedResolution(true)

This feature is specifically targeted to address [Ivy resolution is beging slow for multi-module projects #413][413]. Consolidated resolution aims to fix this issue by artificially constructing an Ivy dependency graph for the unique managed dependencies. If two subprojects introduce identical external dependencies, both subprojects should consolidate to the same graph, and therefore resolve immediately for the second `update`. [#1454][1454] by [@eed3si9n][@eed3si9n]

## sbt 0.13.5

  [Auto-Plugins-Post]: https://typesafe.com/blog/preview-of-upcoming-sbt-10-features-read-about-the-new-plugins

sbt 0.13.5 is a technology preview of what's to come to sbt 1.0 with enhancements like [auto plugins][Auto-Plugins-Post] and the necessary APIs changes and launcher for "sbt as a server.", defined in the sbt-remote-control project.

- The Scala version for sbt and sbt plugins is now 2.10.4. This is a compatible version bump.
- Added a new setting testResultLogger to allow customisation of logging of test results. (#1225)
- When test is run and there are no tests available, omit logging output. Especially useful for aggregate modules. test-only et al unaffected. (#1185)
- sbt now uses minor-patch version of ivy 2.3 (org.scala-sbt.ivy:ivy:2.3.0-sbt-<git sha>)
- `sbt.Plugin` deprecated in favor of `sbt.AutoPlugin`
- name-hashing incremental compiler now supports scala macros.
- `testResultLogger` is now configured.
- sbt-server hooks for task cancellation.
- Add `JUnitXmlReportPlugin` which generates junit-xml-reports for all tests.
- Optionally enable forced garbage collection after tasks (`-Dsbt.task.forcegc=true`).
