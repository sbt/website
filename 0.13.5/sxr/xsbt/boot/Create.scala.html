<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>xsbt/boot/Create.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt.boot

<span class="keyword">import</span> <a href="Pre.scala.html#xsbt.boot.Pre" title="xsbt.boot.Pre.type">Pre</a>._
<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, FileInputStream, FileOutputStream<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Locale, Properties<span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.immutable.List

<span class="keyword">object</span> <a title="xsbt.boot.Initialize.type" id="xsbt.boot.Initialize">Initialize</a>
<a href="#xsbt.boot.Initialize" title="xsbt.boot.Initialize.type" class="delimiter">{</a>
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]" id="xsbt.boot.Initialize.selectCreate">selectCreate</a> = <span class="delimiter">(</span><a href="#xsbt.boot.Initialize.selectCreate.$anonfun.x$1" title="xsbt.boot.AppProperty">_</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty" title="xsbt.boot.AppProperty">AppProperty</a><span class="delimiter">)</span>.<a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty.create" title="=&gt; Option[xsbt.boot.PropertyInit]">create</a>
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]" id="xsbt.boot.Initialize.selectQuick">selectQuick</a> = <span class="delimiter">(</span><a href="#xsbt.boot.Initialize.selectQuick.$anonfun.x$2" title="xsbt.boot.AppProperty">_</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty" title="xsbt.boot.AppProperty">AppProperty</a><span class="delimiter">)</span>.<a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty.quick" title="=&gt; Option[xsbt.boot.PropertyInit]">quick</a>
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]" id="xsbt.boot.Initialize.selectFill">selectFill</a> = <span class="delimiter">(</span><a href="#xsbt.boot.Initialize.selectFill.$anonfun.x$3" title="xsbt.boot.AppProperty">_</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty" title="xsbt.boot.AppProperty">AppProperty</a><span class="delimiter">)</span>.<a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty.fill" title="=&gt; Option[xsbt.boot.PropertyInit]">fill</a>
	<span class="keyword">def</span> <a title="(file: java.io.File, promptCreate: String, enableQuick: Boolean, spec: List[xsbt.boot.AppProperty])Unit" id="xsbt.boot.Initialize.create">create</a><span class="delimiter">(</span><a title="java.io.File" id="xsbt.boot.Initialize.create.file">file</a>: <span title="java.io.File">File</span>, <a title="String" id="xsbt.boot.Initialize.create.promptCreate">promptCreate</a>: <span title="String">String</span>, <a title="Boolean" id="xsbt.boot.Initialize.create.enableQuick">enableQuick</a>: <span title="Boolean">Boolean</span>, <a title="List[xsbt.boot.AppProperty]" id="xsbt.boot.Initialize.create.spec">spec</a>: <span title="List[xsbt.boot.AppProperty]">List</span><span class="delimiter">[</span>AppProperty<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">{</span>
		<a href="Pre.scala.html#xsbt.boot.Pre.readLine" title="(prompt: String)Option[String]">readLine</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.create.promptCreate" title="String">promptCreate</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; (y/N&quot;)" class="string">&quot; (y/N&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.create.enableQuick" title="Boolean">enableQuick</a><span class="delimiter">)</span> <span title="String(&quot;/s&quot;)" class="string">&quot;/s&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;) &quot;)" class="string">&quot;) &quot;</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <span title="None.type">None</span> =&gt; <a href="Pre.scala.html#xsbt.boot.Pre.declined" title="(msg: String)Nothing">declined</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
			<span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="xsbt.boot.Initialize.create.line">line</a><span class="delimiter">)</span> =&gt;
				<a href="#xsbt.boot.Initialize.create.line" title="String">line</a>.<span title="(x$1: java.util.Locale)String">toLowerCase</span><span class="delimiter">(</span><span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
				<span class="delimiter">{</span>
					<span class="keyword">case</span> <span title="String(&quot;y&quot;)" class="string">&quot;y&quot;</span> | <span title="String(&quot;yes&quot;)" class="string">&quot;yes&quot;</span> =&gt; <a href="#xsbt.boot.Initialize.process" title="(file: java.io.File, appProperties: List[xsbt.boot.AppProperty], select: xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit])Unit">process</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.create.file" title="java.io.File">file</a>, <a href="#xsbt.boot.Initialize.create.spec" title="List[xsbt.boot.AppProperty]">spec</a>, <a href="#xsbt.boot.Initialize.selectCreate" title="=&gt; xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]">selectCreate</a><span class="delimiter">)</span>
					<span class="keyword">case</span> <span title="String(&quot;s&quot;)" class="string">&quot;s&quot;</span> =&gt; <a href="#xsbt.boot.Initialize.process" title="(file: java.io.File, appProperties: List[xsbt.boot.AppProperty], select: xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit])Unit">process</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.create.file" title="java.io.File">file</a>, <a href="#xsbt.boot.Initialize.create.spec" title="List[xsbt.boot.AppProperty]">spec</a>, <a href="#xsbt.boot.Initialize.selectQuick" title="=&gt; xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]">selectQuick</a><span class="delimiter">)</span>
					<span class="keyword">case</span> <span title="String(&quot;n&quot;)" class="string">&quot;n&quot;</span> | <span title="String(&quot;no&quot;)" class="string">&quot;no&quot;</span> | <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> =&gt; <a href="Pre.scala.html#xsbt.boot.Pre.declined" title="(msg: String)Nothing">declined</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
					<span class="keyword">case</span> <a title="String" id="xsbt.boot.Initialize.create.x">x</a> =&gt;
						<span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;  \'&quot;)" class="string">&quot;  '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt.boot.Initialize.create.x" title="String">x</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' not understood.&quot;)" class="string">&quot;' not understood.&quot;</span><span class="delimiter">)</span>
						<a href="#xsbt.boot.Initialize.create" title="(file: java.io.File, promptCreate: String, enableQuick: Boolean, spec: List[xsbt.boot.AppProperty])Unit">create</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.create.file" title="java.io.File">file</a>, <a href="#xsbt.boot.Initialize.create.promptCreate" title="String">promptCreate</a>, <a href="#xsbt.boot.Initialize.create.enableQuick" title="Boolean">enableQuick</a>, <a href="#xsbt.boot.Initialize.create.spec" title="List[xsbt.boot.AppProperty]">spec</a><span class="delimiter">)</span>
				<span class="delimiter">}</span>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>
	<span class="keyword">def</span> <a title="(file: java.io.File, spec: List[xsbt.boot.AppProperty])Unit" id="xsbt.boot.Initialize.fill">fill</a><span class="delimiter">(</span><a title="java.io.File" id="xsbt.boot.Initialize.fill.file">file</a>: <span title="java.io.File">File</span>, <a title="List[xsbt.boot.AppProperty]" id="xsbt.boot.Initialize.fill.spec">spec</a>: <span title="List[xsbt.boot.AppProperty]">List</span><span class="delimiter">[</span>AppProperty<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#xsbt.boot.Initialize.process" title="(file: java.io.File, appProperties: List[xsbt.boot.AppProperty], select: xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit])Unit">process</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.fill.file" title="java.io.File">file</a>, <a href="#xsbt.boot.Initialize.fill.spec" title="List[xsbt.boot.AppProperty]">spec</a>, <a href="#xsbt.boot.Initialize.selectFill" title="=&gt; xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]">selectFill</a><span class="delimiter">)</span>
	<span class="keyword">def</span> <a title="(file: java.io.File, appProperties: List[xsbt.boot.AppProperty], select: xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit])Unit" id="xsbt.boot.Initialize.process">process</a><span class="delimiter">(</span><a title="java.io.File" id="xsbt.boot.Initialize.process.file">file</a>: <span title="java.io.File">File</span>, <a title="List[xsbt.boot.AppProperty]" id="xsbt.boot.Initialize.process.appProperties">appProperties</a>: <span title="List[xsbt.boot.AppProperty]">List</span><span class="delimiter">[</span>AppProperty<span class="delimiter">]</span>, <a title="xsbt.boot.AppProperty =&gt; Option[xsbt.boot.PropertyInit]" id="xsbt.boot.Initialize.process.select">select</a>: AppProperty =&gt; Option<span class="delimiter">[</span>PropertyInit<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="java.util.Properties" id="xsbt.boot.Initialize.process.properties">properties</a> = <a href="Pre.scala.html#xsbt.boot.Pre.readProperties" title="(propertiesFile: java.io.File)java.util.Properties">readProperties</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.process.file" title="java.io.File">file</a><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="List[Unit]" id="xsbt.boot.Initialize.process.uninitialized">uninitialized</a> =
			<span class="keyword">for</span><span class="delimiter">(</span><a title="xsbt.boot.AppProperty" id="xsbt.boot.Initialize.process.uninitialized.$anonfun.property">property</a> &lt;- <a href="#xsbt.boot.Initialize.process.appProperties" title="(f: xsbt.boot.AppProperty =&gt; scala.collection.GenTraversableOnce[Unit])(implicit bf: scala.collection.generic.CanBuildFrom[List[xsbt.boot.AppProperty],Unit,List[Unit]])List[Unit]">appProperties</a>; <a title="xsbt.boot.PropertyInit" id="xsbt.boot.Initialize.process.uninitialized.$anonfun.$anonfun.init">init</a> &lt;- <a href="#xsbt.boot.Initialize.process.select" title="(v1: xsbt.boot.AppProperty)Option[xsbt.boot.PropertyInit]">select</a><span title="(f: xsbt.boot.PropertyInit =&gt; Unit)Option[Unit]" class="delimiter">(</span><a href="#xsbt.boot.Initialize.process.uninitialized.$anonfun.property" title="xsbt.boot.AppProperty">property</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#xsbt.boot.Initialize.process.properties" title="java.util.Properties">properties</a>.<span title="(x$1: String)String">getProperty</span><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.process.uninitialized.$anonfun.property" title="xsbt.boot.AppProperty">property</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty.name" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">yield</span>
				<a href="#xsbt.boot.Initialize.initialize" title="(properties: java.util.Properties, name: String, init: xsbt.boot.PropertyInit)Unit">initialize</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.process.properties" title="java.util.Properties">properties</a>, <a href="#xsbt.boot.Initialize.process.uninitialized.$anonfun.property" title="xsbt.boot.AppProperty">property</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;AppProperty.name" title="=&gt; String">name</a>, <a href="#xsbt.boot.Initialize.process.uninitialized.$anonfun.$anonfun.init" title="xsbt.boot.PropertyInit">init</a><span class="delimiter">)</span>
		<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#xsbt.boot.Initialize.process.uninitialized" title="List[Unit]">uninitialized</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="Pre.scala.html#xsbt.boot.Pre.writeProperties" title="(properties: java.util.Properties, file: java.io.File, msg: String)Unit">writeProperties</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.process.properties" title="java.util.Properties">properties</a>, <a href="#xsbt.boot.Initialize.process.file" title="java.io.File">file</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>
	<span class="keyword">def</span> <a title="(properties: java.util.Properties, name: String, init: xsbt.boot.PropertyInit)Unit" id="xsbt.boot.Initialize.initialize">initialize</a><span class="delimiter">(</span><a title="java.util.Properties" id="xsbt.boot.Initialize.initialize.properties">properties</a>: <span title="java.util.Properties">Properties</span>, <a title="String" id="xsbt.boot.Initialize.initialize.name">name</a>: <span title="String">String</span>, <a title="xsbt.boot.PropertyInit" id="xsbt.boot.Initialize.initialize.init">init</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;PropertyInit" title="xsbt.boot.PropertyInit">PropertyInit</a><span class="delimiter">)</span>
	<span class="delimiter">{</span>
		<a href="#xsbt.boot.Initialize.initialize.init" title="xsbt.boot.PropertyInit">init</a> <span title="Unit" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <a title="xsbt.boot.SetProperty" id="xsbt.boot.Initialize.initialize.set">set</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;SetProperty" title="xsbt.boot.SetProperty">SetProperty</a> =&gt; <a href="#xsbt.boot.Initialize.initialize.properties" title="java.util.Properties">properties</a>.<span title="(x$1: String, x$2: String)Object">setProperty</span><span title="Unit" class="delimiter">(</span><a href="#xsbt.boot.Initialize.initialize.name" title="String">name</a>, <a href="#xsbt.boot.Initialize.initialize.set" title="xsbt.boot.SetProperty">set</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;SetProperty.value" title="=&gt; String">value</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <a title="xsbt.boot.PromptProperty" id="xsbt.boot.Initialize.initialize.prompt">prompt</a>: <a href="LaunchConfiguration.scala.html#xsbt.boot;PromptProperty" title="xsbt.boot.PromptProperty">PromptProperty</a> =&gt;
				<span class="keyword">def</span> <a title="=&gt; Nothing" id="xsbt.boot.Initialize.initialize.noValue">noValue</a> = <a href="Pre.scala.html#xsbt.boot.Pre.declined" title="(msg: String)Nothing">declined</a><span class="delimiter">(</span><span title="String(&quot;No value provided for &quot;)" class="string">&quot;No value provided for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt.boot.Initialize.initialize.prompt" title="xsbt.boot.PromptProperty">prompt</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;PromptProperty.label" title="=&gt; String">label</a><span class="delimiter">)</span>
				<a href="Pre.scala.html#xsbt.boot.Pre.readLine" title="(prompt: String)Option[String]">readLine</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.initialize.prompt" title="xsbt.boot.PromptProperty">prompt</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;PromptProperty.label" title="=&gt; String">label</a> <span title="(x$1: Any)String">+</span> <a href="#xsbt.boot.Initialize.initialize.prompt" title="xsbt.boot.PromptProperty">prompt</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;PromptProperty.default" title="=&gt; Option[String]">default</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><span title="String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt.boot.Initialize.initialize.$anonfun.x$4" title="String">_</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
				<span class="delimiter">{</span>
					<span class="keyword">case</span> <span title="None.type">None</span> =&gt; <a href="#xsbt.boot.Initialize.initialize.noValue" title="=&gt; Nothing">noValue</a>
					<span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="xsbt.boot.Initialize.initialize.line">line</a><span class="delimiter">)</span> =&gt;
						<span class="keyword">val</span> <a title="String" id="xsbt.boot.Initialize.initialize.value">value</a> = <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="Pre.scala.html#xsbt.boot.Pre.isEmpty" title="(line: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.initialize.line" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="Pre.scala.html#xsbt.boot.Pre.orElse" title="(opt: Option[String], default: String)String">orElse</a><span class="delimiter">(</span><a href="#xsbt.boot.Initialize.initialize.prompt" title="xsbt.boot.PromptProperty">prompt</a>.<a href="LaunchConfiguration.scala.html#xsbt.boot;PromptProperty.default" title="=&gt; Option[String]">default</a>, <a href="#xsbt.boot.Initialize.initialize.noValue" title="=&gt; Nothing">noValue</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#xsbt.boot.Initialize.initialize.line" title="String">line</a>
						<a href="#xsbt.boot.Initialize.initialize.properties" title="java.util.Properties">properties</a>.<span title="(x$1: String, x$2: String)Object">setProperty</span><span title="Unit" class="delimiter">(</span><a href="#xsbt.boot.Initialize.initialize.name" title="String">name</a>, <a href="#xsbt.boot.Initialize.initialize.value" title="String">value</a><span class="delimiter">)</span>
				<span class="delimiter">}</span>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
