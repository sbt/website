


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction &mdash; sbt Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/syntax.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../versions.js"></script>
    <script type="text/javascript" src="../_static/set-versions.js"></script>
    <link rel="top" title="sbt Documentation" href="../index.html" />
    <link rel="up" title="Dormant Pages" href="Dormant.html" />
    <link rel="next" title="0.12.0 Changes" href="../Community/ChangeSummary_0.12.0.html" />
    <link rel="prev" title="Snippets of docs that need to move to another page" href="Needs-New-Home.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="http://www.scala-sbt.org/">Home</a></li>
          <li><a href="../index.html">Documentation</a></li>
          <li><a href="../Getting-Started/Setup.html">Download</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/sbt-dev">Mailing List</a></li>
          <li><a href="http://github.com/sbt/sbt">Project</a></li>           
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Introduction</div>
      <div class="search-box">
        <form method="get" action="http://www.google.com/search" id="search">
          <input type="search" placeholder="Search 0.13.2 on Google" name="q" results="10" size="29" id="search-input">
          <input type="hidden"  name="sitesearch" value="http://www.scala-sbt.org/0.13.2/docs/"> 
          <input type="submit" id="submit-search">
        </form>
      </div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">        
              <li>
                 <span class="divider">|</span> <a href="../Community/ChangeSummary_0.12.0.html">0.12.0 Changes</a> <span class="divider">»</span>
              </li>
              <li>
                 <span class="divider">&gt;</span><a href="Dormant.html">Dormant Pages</a>
              </li>
              <li>
                <a href="../index.html">Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="Needs-New-Home.html">Snippets of docs that need to move to another page</a> <span class="divider">|</span>
              </li>
              <li>
                <select id="versions"><option selected value="0.13.2">Version 0.13.2</option></select>
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <p><em>Wiki Maintenance Note:</em> This page has been partly replaced by [[Getting
Started Basic Def]] and [[Getting Started More About Settings]]. It has
some obsolete terminology:</p>
<ul class="simple">
<li>we now avoid referring to build definition as &quot;configuration&quot; to
avoid confusion with compile configurations</li>
<li>we now avoid referring to basic/light/quick vs. full configuration,
in favor of &quot;.sbt build definition files&quot; and &quot;.scala build
definition files&quot;</li>
</ul>
<p>However, it may still be worth combing this page for examples or points
that are not made in new pages. We may want to add FAQs or topic pages
to supplement the Getting Started pages with some of that information.
After doing so, this page could simply be a redirect (delete the
content, link to the new pages about build definition).</p>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>A build definition is written in Scala. There are two types of
definitions: light and full. A light definition
is a quick way of configuring a build, consisting of a list of Scala
expressions describing project settings. A <a class="reference internal" href="Full-Configuration.html"><em>full definition</em></a> is
made up of one or more Scala source files that describe relationships
between projects and introduce new configurations and settings. This
page introduces the <span class="pre">Setting</span> type, which is used by light and full
definitions for general configuration.</p>
<div class="section" id="introductory-examples">
<h2>Introductory Examples<a class="headerlink" href="#introductory-examples" title="Permalink to this headline">¶</a></h2>
<p>Basic examples of each type of definition are shown below for the
purpose of getting an idea of what they look like, not for full
comprehension of details, which are described at <tt class="xref doc docutils literal"><span class="pre">light</span> <span class="pre">definition</span></tt>
and <a class="reference internal" href="Full-Configuration.html"><em>full definition</em></a>.</p>
<p><span class="pre">&lt;base&gt;/build.sbt</span> (light)</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;My Project&quot;</span>

<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
</pre></div>
</div>
<p><span class="pre">&lt;base&gt;/project/Build.scala</span> (full)</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">sbt._</span>
<span class="k">import</span> <span class="nn">Keys._</span>

<span class="k">object</span> <span class="nc">MyBuild</span> <span class="k">extends</span> <span class="nc">Build</span>
<span class="o">{</span>
   <span class="k">lazy</span> <span class="k">val</span> <span class="n">root</span> <span class="k">=</span> <span class="nc">Project</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span> <span class="n">dependsOn</span><span class="o">(</span><span class="n">sub</span><span class="o">)</span>
   <span class="k">lazy</span> <span class="k">val</span> <span class="n">sub</span> <span class="k">=</span> <span class="nc">Project</span><span class="o">(</span><span class="s">&quot;sub&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">(</span><span class="s">&quot;sub&quot;</span><span class="o">))</span> <span class="n">settings</span><span class="o">(</span>
      <span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;My Project&quot;</span><span class="o">,</span>
      <span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
   <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="important-settings-background">
<h1>Important Settings Background<a class="headerlink" href="#important-settings-background" title="Permalink to this headline">¶</a></h1>
<p>The fundamental type of a configurable in sbt is a <span class="pre">Setting[T]</span>. Each
line in the <span class="pre">build.sbt</span> example above is of this type. The arguments
to the <span class="pre">settings</span> method in the <span class="pre">Build.scala</span> example are of type
<span class="pre">Setting[T]</span>. Specifically, the <span class="pre">name</span> setting has type
<span class="pre">Setting[String]</span> and the <span class="pre">libraryDependencies</span> setting has type
<span class="pre">Setting[Seq[ModuleID]]</span>, where <span class="pre">ModuleID</span> represents a dependency.</p>
<p>Throughout the documentation, many examples show a setting, such as:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
</pre></div>
</div>
<p>This setting expression either goes in a <tt class="xref doc docutils literal"><span class="pre">light</span> <span class="pre">definition</span></tt>
<span class="pre">(build.sbt)</span> as is or in the <span class="pre">settings</span> of a <span class="pre">Project</span> instance
in a <a class="reference internal" href="Full-Configuration.html"><em>full definition</em></a>
<span class="pre">(Build.scala)</span> as shown in the example. This is an important point to
understanding the context of examples in the documentation. (That is,
you now know where to copy and paste examples now.)</p>
<p>A <span class="pre">Setting[T]</span> describes how to initialize a setting of type <span class="pre">T</span>.
The settings shown in the examples are expressions, not statements. In
particular, there is no hidden mutable map that is being modified. Each
<span class="pre">Setting[T]</span> is a value that describes an update to a map. The actual
map is rarely directly referenced by user code. It is not the final map
that is usually important, but the operations on the map.</p>
<p>To emphasize this, the setting in the following <span class="pre">Build.scala</span> fragment
<em>is ignored</em> because it is a value that need to be included in the
<span class="pre">settings</span> of a <span class="pre">Project</span>. (Unfortunately, Scala will discard
non-Unit values to get Unit, which is why there is no compile error.)</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">object</span> <span class="nc">Bad</span> <span class="k">extends</span> <span class="nc">Build</span> <span class="o">{</span>
  <span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">object</span> <span class="nc">Good</span> <span class="k">extends</span> <span class="nc">Build</span>
<span class="o">{</span>
  <span class="k">lazy</span> <span class="k">val</span> <span class="n">root</span> <span class="k">=</span> <span class="nc">Project</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span> <span class="n">settings</span><span class="o">(</span>
    <span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
  <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="declaring-a-setting">
<h1>Declaring a Setting<a class="headerlink" href="#declaring-a-setting" title="Permalink to this headline">¶</a></h1>
<p>There is fundamentally one type of initialization, represented by the
<span class="pre">&lt;&lt;=</span> method. The other initialization methods <span class="pre">:=</span>, <span class="pre">+=</span>,
<span class="pre">++=</span>, <span class="pre">&lt;+=</span>, <span class="pre">&lt;++=</span>, and <span class="pre">~=</span> are convenience methods that can
be defined in terms of <span class="pre">&lt;&lt;=</span>.</p>
<p>The motivation behind the method names is:</p>
<ul class="simple">
<li>All methods end with <span class="pre">=</span> to obtain the lowest possible infix
precedence.</li>
<li>A method starting with <span class="pre">&lt;</span> indicates that the initialization uses
other settings.</li>
<li>A single <span class="pre">+</span> means a single value is expected and will be appended
to the current sequence.</li>
<li><span class="pre">++</span> means a <span class="pre">Seq[T]</span> is expected. The sequence will be appended
to the current sequence.</li>
</ul>
<p>The following sections include descriptions and examples of each
initialization method. The descriptions use &quot;will initialize&quot; or &quot;will
append&quot; to emphasize that they construct a value describing an update
and do not mutate anything. Each setting may be directly included in a
light configuration (build.sbt), appropriately separated by blank lines.
For a full configuration (Build.scala), the setting must go in a
settings Seq as described in the previous section. Information about the
types of the left and right hand sides of the methods follows this
section.</p>
<div class="section" id="id1">
<h2>:=<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><span class="pre">:=</span> is used to define a setting that overwrites any previous value
without referring to other settings. For example, the following defines
a setting that will set <em>name</em> to &quot;My Project&quot; regardless of whether
<em>name</em> has already been initialized.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;My Project&quot;</span>
</pre></div>
</div>
<p>No other settings are used. The value assigned is just a constant.</p>
</div>
<div class="section" id="and">
<h2>+= and ++=<a class="headerlink" href="#and" title="Permalink to this headline">¶</a></h2>
<p><span class="pre">+=</span> is used to define a setting that will append a single value to
the current sequence without referring to other settings. For example,
the following defines a setting that will append a JUnit dependency to
<em>libraryDependencies</em>. No other settings are referenced.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
</pre></div>
</div>
<p>The related method <span class="pre">++=</span> appends a sequence to the current sequence,
also without using other settings. For example, the following defines a
setting that will add dependencies on ScalaCheck and specs to the
current list of dependencies. Because it will append a <span class="pre">Seq</span>, it uses
++= instead of +=.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
   <span class="s">&quot;org.scala-tools.testing&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalacheck&quot;</span> <span class="o">%</span> <span class="s">&quot;1.9&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span><span class="o">,</span>
   <span class="s">&quot;org.scala-tools.testing&quot;</span> <span class="o">%%</span> <span class="s">&quot;specs&quot;</span> <span class="o">%</span> <span class="s">&quot;1.6.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
    <span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
<p>The types involved in += and ++= are constrained by the existence of an
implicit parameter of type Append.Value[A,B] in the case of += or
Append.Values[A,B] in the case of ++=. Here, B is the type of the value
being appended and A is the type of the setting that the value is being
appended to. See
<a class="reference external" href="../../api/sbt/Append$.html">Append</a>
for the provided instances.</p>
</div>
<div class="section" id="id2">
<h2>~=<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><span class="pre">~=</span> is used to transform the current value of a setting. For example,
the following defines a setting that will remove <span class="pre">-Y</span> compiler options
from the current list of compiler options.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scalacOptions</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">~=</span> <span class="o">{</span> <span class="o">(</span><span class="n">options</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=&gt;</span>
   <span class="n">options</span> <span class="n">filterNot</span> <span class="o">(</span> <span class="k">_</span> <span class="n">startsWith</span> <span class="s">&quot;-Y&quot;</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The earlier declaration of JUnit as a library dependency using <span class="pre">+=</span>
could also be written as:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">~=</span> <span class="o">{</span> <span class="o">(</span><span class="n">deps</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">ModuleID</span><span class="o">])</span> <span class="k">=&gt;</span>
  <span class="n">deps</span> <span class="o">:+</span> <span class="o">(</span><span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>&lt;&lt;=<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>The most general method is &lt;&lt;=. All other methods can be implemented in
terms of &lt;&lt;=. &lt;&lt;= defines a setting using other settings, possibly
including the previous value of the setting being defined. For example,
declaring JUnit as a dependency using &lt;&lt;= would look like:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">&lt;&lt;=</span> <span class="n">libraryDependencies</span> <span class="n">apply</span> <span class="o">{</span> <span class="o">(</span><span class="n">deps</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">ModuleID</span><span class="o">])</span> <span class="k">=&gt;</span>
   <span class="c1">// Note that :+ is a method on Seq that appends a single value</span>
   <span class="n">deps</span> <span class="o">:+</span> <span class="o">(</span><span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;junit&quot;</span> <span class="o">%</span> <span class="s">&quot;4.8&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This defines a setting that will apply the provided function to the
previous value of <em>libraryDependencies</em>. <span class="pre">apply</span> and <span class="pre">Seq[ModuleID]</span>
are explicit for demonstration only and may be omitted.</p>
</div>
<div class="section" id="id4">
<h2>&lt;+= and &lt;++=<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>The &lt;+= method is a hybrid of the += and &lt;&lt;= methods. Similarly, &lt;++= is
a hybrid of the ++= and &lt;&lt;= methods. These methods are convenience
methods for using other settings to append to the current value of a
setting.</p>
<p>For example, the following will add a dependency on the Scala compiler
to the current list of dependencies. Because the <em>scalaVersion</em> setting
is used, the method is &lt;+= instead of +=.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">&lt;+=</span> <span class="n">scalaVersion</span><span class="o">(</span> <span class="s">&quot;org.scala-lang&quot;</span> <span class="o">%</span> <span class="s">&quot;scala-compiler&quot;</span> <span class="o">%</span> <span class="k">_</span> <span class="o">)</span>
</pre></div>
</div>
<p>This next example adds a dependency on the Scala compiler to the current
list of dependencies. Because another setting (<em>scalaVersion</em>) is used
and a Seq is appended, the method is &lt;++=.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">&lt;++=</span> <span class="n">scalaVersion</span> <span class="o">{</span> <span class="n">sv</span> <span class="k">=&gt;</span>
  <span class="o">(</span><span class="s">&quot;org.scala-lang&quot;</span> <span class="o">%</span> <span class="s">&quot;scala-compiler&quot;</span> <span class="o">%</span> <span class="n">sv</span><span class="o">)</span> <span class="o">::</span>
  <span class="o">(</span><span class="s">&quot;org.scala-lang&quot;</span> <span class="o">%</span> <span class="s">&quot;scala-swing&quot;</span> <span class="o">%</span> <span class="n">sv</span><span class="o">)</span> <span class="o">::</span>
  <span class="nc">Nil</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The types involved in &lt;+= and &lt;++=, like += and ++=, are constrained by
the existence of an implicit parameter of type Append.Value[A,B] in the
case of &lt;+= or Append.Values[A,B] in the case of &lt;++=. Here, B is the
type of the value being appended and A is the type of the setting that
the value is being appended to. See
<a class="reference external" href="../../api/sbt/Append$.html">Append</a>
for the provided instances.</p>
</div>
</div>
<div class="section" id="setting-types">
<h1>Setting types<a class="headerlink" href="#setting-types" title="Permalink to this headline">¶</a></h1>
<p>This section provides information about the types of the left and
right-hand sides of the initialization methods. It is currently
incomplete.</p>
<div class="section" id="setting-keys">
<h2>Setting Keys<a class="headerlink" href="#setting-keys" title="Permalink to this headline">¶</a></h2>
<p>The left hand side of a setting definition is of type
<a class="reference external" href="../../api/sbt/ScopedSetting.html">ScopedSetting</a>.
This type has two parts: a key (of type
<a class="reference external" href="../../api/sbt/SettingKey.html">SettingKey</a>)
and a scope (of type
<a class="reference external" href="../../api/sbt/Scope$.html">Scope</a>). An
unspecified scope is like using <span class="pre">this</span> to refer to the current
context. The previous examples on this page have not defined an explicit
scope. See [[Inspecting Settings]] for details on the axes that make up
scopes.</p>
<p>The target (the value on the left) of a method like <span class="pre">:=</span> identifies
one of the main constructs in sbt: a setting, a task, or an input task.
It is not an actual setting or task, but a key representing a setting or
task. A setting is a value assigned when a project is loaded. A task is
a unit of work that is run on-demand after a project is loaded and
produces a value. An input task, previously known as a method task in
sbt 0.7 and earlier, accepts an input string and produces a task to be
run. (The renaming is because it can accept arbitrary input in 0.10+ and
not just a space-delimited sequence of arguments like in 0.7.)</p>
<p>A setting key has type
<a class="reference external" href="../../api/sbt/SettingKey.html">SettingKey</a>,
a task key has type
<a class="reference external" href="../../api/sbt/TaskKey.html">TaskKey</a>,
and an input task has type
<a class="reference external" href="../../api/sbt/InputKey.html">InputKey</a>.
The remainder of this section only discusses settings. See [[Tasks]] and
[[Input Tasks]] for details on the other types (those pages assume an
understanding of this page).</p>
<p>To construct a
<a class="reference external" href="../../api/sbt/ScopedSetting.html">ScopedSetting</a>,
select the key and then scope it using the <span class="pre">in</span> method (see the
<a class="reference external" href="../../api/sbt/ScopedSetting.html">ScopedSetting</a>
for API details). For example, the setting for compiler options for the
test sources is referenced using the <em>scalacOptions</em> key and the
<span class="pre">Test</span> configuration in the current project.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">ref</span><span class="k">:</span> <span class="kt">ScopedSetting</span><span class="o">[</span><span class="kt">Seq</span><span class="o">[</span><span class="kt">String</span><span class="o">]]</span> <span class="k">=</span> <span class="n">scalacOptions</span> <span class="n">in</span> <span class="nc">Test</span>
</pre></div>
</div>
<p>The current project doesn't need to be explicitly specified, since that
is the default in most cases. Some settings are specific to a task, in
which case the task should be specified as part of the scope as well.
For example, the compiler options used for the <em>console</em> task for test
sources is referenced like:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">ref</span><span class="k">:</span> <span class="kt">ScopedSetting</span><span class="o">[</span><span class="kt">Seq</span><span class="o">[</span><span class="kt">String</span><span class="o">]]</span> <span class="k">=</span> <span class="n">scalacOptions</span> <span class="n">in</span> <span class="nc">Test</span> <span class="n">in</span> <span class="n">console</span>
</pre></div>
</div>
<p>In these examples, the type of the setting reference key is given
explicitly and the key is assigned to a value to emphasize that it is a
normal (immutable) Scala value and can be manipulated and passed around
as such.</p>
</div>
<div class="section" id="computing-the-value-for-a-setting">
<h2>Computing the value for a setting<a class="headerlink" href="#computing-the-value-for-a-setting" title="Permalink to this headline">¶</a></h2>
<p>The right hand side of a setting definition varies by the initialization
method used. In the case of :=, +=, ++=, and ~=, the type of the
argument is straightforward (see the
<a class="reference external" href="../../api/sbt/ScopedSetting.html">ScopedSetting</a>
API). For &lt;&lt;=, &lt;+=, and &lt;++=, the type is <span class="pre">Initialize[T]</span> (for &lt;&lt;= and
&lt;+=) or <span class="pre">Initialize[Seq[T]]</span> (for &lt;++=). This section discusses the
<a class="reference external" href="../../api/sbt/Init$Initialize.html">Initialize</a>
type.</p>
<p>A value of type <span class="pre">Initialize[T]</span> represents a computation that takes
the values of other settings as inputs. For example, in the following
setting, the argument to &lt;&lt;= is of type <span class="pre">Initialize[File]</span>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scalaSource</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">&lt;&lt;=</span> <span class="n">baseDirectory</span> <span class="o">{</span>
   <span class="o">(</span><span class="n">base</span><span class="k">:</span> <span class="kt">File</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">base</span> <span class="o">/</span> <span class="s">&quot;src&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This example can be written more explicitly as:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="o">{</span>
  <span class="k">val</span> <span class="n">key</span><span class="k">:</span> <span class="kt">ScopedSetting</span><span class="o">[</span><span class="kt">File</span><span class="o">]</span> <span class="k">=</span> <span class="n">scalaSource</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">init</span><span class="k">:</span> <span class="kt">Initialize</span><span class="o">[</span><span class="kt">File</span><span class="o">]</span> <span class="k">=</span> <span class="n">baseDirectory</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span> <span class="o">(</span><span class="n">base</span><span class="k">:</span> <span class="kt">File</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">base</span> <span class="o">/</span> <span class="s">&quot;src&quot;</span> <span class="o">)</span>
  <span class="n">key</span><span class="o">.&lt;&lt;=(</span><span class="n">init</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To construct a value of type <span class="pre">Initialize</span>, construct a tuple of up to
nine input <span class="pre">ScopedSetting</span>s. Then, define the function that will
compute the value of the setting given the values for these input
settings.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">path</span><span class="k">:</span> <span class="kt">Initialize</span><span class="o">[</span><span class="kt">File</span><span class="o">]</span> <span class="k">=</span>
  <span class="o">(</span><span class="n">baseDirectory</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">version</span><span class="o">).</span><span class="n">apply</span><span class="o">(</span> <span class="o">(</span><span class="n">base</span><span class="k">:</span> <span class="kt">File</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">v</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">base</span> <span class="o">/</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="s">&quot;.jar&quot;</span><span class="o">)</span>
  <span class="o">)</span>
</pre></div>
</div>
<p>This example takes the base directory, project name, and project version
as inputs. The keys for these settings are defined in [sbt.Keys], along
with all other built-in keys. The argument to the <span class="pre">apply</span> method is a
function that takes the values of those settings and computes a new
value. In this case, that value is the path of a jar.</p>
</div>
<div class="section" id="initialize-task-t">
<h2>Initialize[Task[T]]<a class="headerlink" href="#initialize-task-t" title="Permalink to this headline">¶</a></h2>
<p>To initialize tasks, the procedure is similar. There are a few
differences. First, the inputs are of type [ScopedTaskable]. The means
that either settings
(<a class="reference external" href="../../api/sbt/ScopedSetting.html">ScopedSetting</a>)
or tasks ([ScopedTask]) may be used as the input to a task. Second, the
name of the method used is <span class="pre">map</span> instead of <span class="pre">apply</span> and the
resulting value is of type <span class="pre">Initialize[Task[T]]</span>. In the following
example, the inputs are the [report|Update-Report] produced by the
<em>update</em> task and the context <em>configuration</em>. The function computes the
locations of the dependencies for that configuration.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">mainDeps</span><span class="k">:</span> <span class="kt">Initialize</span><span class="o">[</span><span class="kt">Task</span><span class="o">[</span><span class="kt">File</span><span class="o">]]</span> <span class="k">=</span>
  <span class="o">(</span><span class="n">update</span><span class="o">,</span> <span class="n">configuration</span><span class="o">).</span><span class="n">map</span><span class="o">(</span> <span class="o">(</span><span class="n">report</span><span class="k">:</span> <span class="kt">UpdateReport</span><span class="o">,</span> <span class="n">config</span><span class="k">:</span> <span class="kt">Configuration</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">report</span><span class="o">.</span><span class="n">select</span><span class="o">(</span><span class="n">configuration</span> <span class="k">=</span> <span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="o">)</span>
  <span class="o">)</span>
</pre></div>
</div>
<p>As before, <em>update</em> and <em>configuration</em> are defined in
<a class="reference external" href="../../sxr/sbt/Keys.scala.html">Keys</a>.
<em>update</em> is of type <span class="pre">TaskKey[UpdateReport]</span> and <em>configuration</em> is of
type <span class="pre">SettingKey[Configuration]</span>.</p>
<p><p class="page-source"><a class="reference external" href="https://github.com/sbt/sbt/raw/0.13.2/src/sphinx/Dormant/Settings.rst">Source for this page</a></p>
</p>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"><ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#introductory-examples">Introductory Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#important-settings-background">Important Settings Background</a></li>
<li><a class="reference internal" href="#declaring-a-setting">Declaring a Setting</a><ul>
<li><a class="reference internal" href="#id1">:=</a></li>
<li><a class="reference internal" href="#and">+= and ++=</a></li>
<li><a class="reference internal" href="#id2">~=</a></li>
<li><a class="reference internal" href="#id3">&lt;&lt;=</a></li>
<li><a class="reference internal" href="#id4">&lt;+= and &lt;++=</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-types">Setting types</a><ul>
<li><a class="reference internal" href="#setting-keys">Setting Keys</a></li>
<li><a class="reference internal" href="#computing-the-value-for-a-setting">Computing the value for a setting</a></li>
<li><a class="reference internal" href="#initialize-task-t">Initialize[Task[T]]</a></li>
</ul>
</li>
</ul>
</div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41449189-1', 'scala-sbt.org');
  ga('send', 'pageview');

  </script>
  

  </body>
</html>