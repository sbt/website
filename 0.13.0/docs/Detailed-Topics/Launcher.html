


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Launcher Specification &mdash; sbt Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/syntax.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.0-Beta1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../versions.js"></script>
    <script type="text/javascript" src="../_static/set-versions.js"></script>
    <link rel="top" title="sbt Documentation" href="../index.html" />
    <link rel="up" title="Detailed Topics" href="index.html" />
    <link rel="next" title="Library Management" href="Library-Management.html" />
    <link rel="prev" title="Java Sources" href="Java-Sources.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="http://www.scala-sbt.org/">Home</a></li>
          <li><a href="../index.html">Documentation</a></li>
          <li><a href="../Getting-Started/Setup.html">Download</a></li>
          <li><a href="http://groups.google.com/group/simple-build-tool">Mailing List</a></li>
          <li><a href="http://github.com/sbt/sbt">Project</a></li>           
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Launcher Specification</div>
      <div class="search-box">
        <form method="get" action="http://www.google.com/search" id="search">
          <input type="search" placeholder="Search 0.13.0-Beta1 on Google" name="q" results="10" size="29" id="search-input">
          <input type="hidden"  name="sitesearch" value="http://www.scala-sbt.org/release/docs/"> 
          <input type="submit" id="submit-search">
        </form>
      </div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">        
              <li>
                 <span class="divider">|</span> <a href="Library-Management.html">Library Management</a> <span class="divider">»</span>
              </li>
              <li>
                 <span class="divider">&gt;</span><a href="index.html">Detailed Topics</a>
              </li>
              <li>
                <a href="../index.html">Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="Java-Sources.html">Java Sources</a> <span class="divider">|</span>
              </li>
              <li>
                <select id="versions"><option selected value="0.13.0-Beta1">Version 0.13.0-Beta1</option></select>
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <div class="section" id="launcher-specification">
<h1>Launcher Specification<a class="headerlink" href="#launcher-specification" title="Permalink to this headline">¶</a></h1>
<p>The sbt launcher component is a self-contained jar that boots a Scala
application without Scala or the application already existing on the
system. The only prerequisites are the launcher jar itself, an optional
configuration file, and a java runtime version 1.6 or greater.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A user downloads the launcher jar and creates a script to run it. In
this documentation, the script will be assumed to be called <tt class="docutils literal"><span class="pre">launch</span></tt>.
For unix, the script would look like:
<tt class="docutils literal"><span class="pre">java</span> <span class="pre">-jar</span> <span class="pre">sbt-launcher.jar</span> <span class="pre">&quot;$&#64;&quot;</span></tt></p>
<p>The user then downloads the configuration file for the application (call
it <tt class="docutils literal"><span class="pre">my.app.configuration</span></tt>) and creates a script to launch it (call it
<tt class="docutils literal"><span class="pre">myapp</span></tt>): <tt class="docutils literal"><span class="pre">launch</span> <span class="pre">&#64;my.app.configuration</span> <span class="pre">&quot;$&#64;&quot;</span></tt></p>
<p>The user can then launch the application using <tt class="docutils literal"><span class="pre">myapp</span> <span class="pre">arg1</span> <span class="pre">arg2</span> <span class="pre">...</span></tt></p>
<p>Like the launcher used to distribute <tt class="docutils literal"><span class="pre">sbt</span></tt>, the downloaded launcher
jar will retrieve Scala and the application according to the provided
configuration file. The versions may be fixed or read from a different
configuration file (the location of which is also configurable). The
location to which the Scala and application jars are downloaded is
configurable as well. The repositories searched are configurable.
Optional initialization of a properties file on launch is configurable.</p>
<p>Once the launcher has downloaded the necessary jars, it loads the
application and calls its entry point. The application is passed
information about how it was called: command line arguments, current
working directory, Scala version, and application ID (organization,
name, version). In addition, the application can ask the launcher to
perform operations such as obtaining the Scala jars and a
<tt class="docutils literal"><span class="pre">ClassLoader</span></tt> for any version of Scala retrievable from the
repositories specified in the configuration file. It can request that
other applications be downloaded and run. When the application
completes, it can tell the launcher to exit with a specific exit code or
to reload the application with a different version of Scala, a different
version of the application, or different arguments.</p>
<p>There are some other options for setup, such as putting the
configuration file inside the launcher jar and distributing that as a
single download. The rest of this documentation describes the details of
configuring, writing, distributing, and running the application.</p>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The launcher may be configured in one of the following ways in
increasing order of precedence:</p>
<ul class="simple">
<li>Replace the <tt class="docutils literal"><span class="pre">/sbt/sbt.boot.properties</span></tt> file in the jar</li>
<li>Put a configuration file named <tt class="docutils literal"><span class="pre">sbt.boot.properties</span></tt> on the
classpath. Put it in the classpath root without the <tt class="docutils literal"><span class="pre">/sbt</span></tt> prefix.</li>
<li>Specify the location of an alternate configuration on the command
line. This can be done by either specifying the location as the
system property <tt class="docutils literal"><span class="pre">sbt.boot.properties</span></tt> or as the first argument to
the launcher prefixed by <tt class="docutils literal"><span class="pre">'&#64;'</span></tt>. The system property has lower
precedence. Resolution of a relative path is first attempted against
the current working directory, then against the user's home
directory, and then against the directory containing the launcher
jar. An error is generated if none of these attempts succeed.</li>
</ul>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>The configuration file is line-based, read as UTF-8 encoded, and defined
by the following grammar. <tt class="docutils literal"><span class="pre">'nl'</span></tt> is a newline or end of file and
<tt class="docutils literal"><span class="pre">'text'</span></tt> is plain text without newlines or the surrounding delimiters
(such as parentheses or square brackets):</p>
<pre>
<strong id="grammar-token-configuration">configuration       </strong> ::=  <a class="reference internal" href="#grammar-token-scala"><tt class="xref docutils literal"><span class="pre">scala</span></tt></a> <a class="reference internal" href="#grammar-token-app"><tt class="xref docutils literal"><span class="pre">app</span></tt></a> <a class="reference internal" href="#grammar-token-repositories"><tt class="xref docutils literal"><span class="pre">repositories</span></tt></a> <a class="reference internal" href="#grammar-token-boot"><tt class="xref docutils literal"><span class="pre">boot</span></tt></a> <a class="reference internal" href="#grammar-token-log"><tt class="xref docutils literal"><span class="pre">log</span></tt></a> <a class="reference internal" href="#grammar-token-appProperties"><tt class="xref docutils literal"><span class="pre">appProperties</span></tt></a>
<strong id="grammar-token-scala">scala               </strong> ::=  &quot;[&quot; &quot;scala&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-version"><tt class="xref docutils literal"><span class="pre">version</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-classifiers"><tt class="xref docutils literal"><span class="pre">classifiers</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-app">app                 </strong> ::=  &quot;[&quot; &quot;app&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-org"><tt class="xref docutils literal"><span class="pre">org</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-name"><tt class="xref docutils literal"><span class="pre">name</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-version"><tt class="xref docutils literal"><span class="pre">version</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-components"><tt class="xref docutils literal"><span class="pre">components</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-class"><tt class="xref docutils literal"><span class="pre">class</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-crossVersioned"><tt class="xref docutils literal"><span class="pre">crossVersioned</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-resources"><tt class="xref docutils literal"><span class="pre">resources</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-classifiers"><tt class="xref docutils literal"><span class="pre">classifiers</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-repositories">repositories        </strong> ::=  &quot;[&quot; &quot;repositories&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> (<a class="reference internal" href="#grammar-token-repository"><tt class="xref docutils literal"><span class="pre">repository</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>)*
<strong id="grammar-token-boot">boot                </strong> ::=  &quot;[&quot; &quot;boot&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-directory"><tt class="xref docutils literal"><span class="pre">directory</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-bootProperties"><tt class="xref docutils literal"><span class="pre">bootProperties</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-search"><tt class="xref docutils literal"><span class="pre">search</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-promptCreate"><tt class="xref docutils literal"><span class="pre">promptCreate</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-promptFill"><tt class="xref docutils literal"><span class="pre">promptFill</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-quickOption"><tt class="xref docutils literal"><span class="pre">quickOption</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-log">log                 </strong> ::=  &quot;[&quot;' &quot;log&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-logLevel"><tt class="xref docutils literal"><span class="pre">logLevel</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-appProperties">appProperties       </strong> ::=  &quot;[&quot; &quot;app-properties&quot; &quot;]&quot; nl (property nl)*
<strong id="grammar-token-ivy">ivy                 </strong> ::=  &quot;[&quot; &quot;ivy&quot; &quot;]&quot; <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-homeDirectory"><tt class="xref docutils literal"><span class="pre">homeDirectory</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-checksums"><tt class="xref docutils literal"><span class="pre">checksums</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-overrideRepos"><tt class="xref docutils literal"><span class="pre">overrideRepos</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a> <a class="reference internal" href="#grammar-token-repoConfig"><tt class="xref docutils literal"><span class="pre">repoConfig</span></tt></a> <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-directory">directory           </strong> ::=  &quot;directory&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>
<strong id="grammar-token-bootProperties">bootProperties      </strong> ::=  &quot;properties&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>
<strong id="grammar-token-search">search              </strong> ::=  &quot;search&quot; &quot;:&quot; (&quot;none&quot; | &quot;nearest&quot; | &quot;root-first&quot; | &quot;only&quot; ) (&quot;,&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>)*
<strong id="grammar-token-logLevel">logLevel            </strong> ::=  &quot;log-level&quot; &quot;:&quot; (&quot;debug&quot; | &quot;info&quot; | &quot;warn&quot; | &quot;error&quot;)
<strong id="grammar-token-promptCreate">promptCreate        </strong> ::=  &quot;prompt-create&quot;  &quot;:&quot;  <a class="reference internal" href="#grammar-token-label"><tt class="xref docutils literal"><span class="pre">label</span></tt></a>
<strong id="grammar-token-promptFill">promptFill          </strong> ::=  &quot;prompt-fill&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-boolean"><tt class="xref docutils literal"><span class="pre">boolean</span></tt></a>
<strong id="grammar-token-quickOption">quickOption         </strong> ::=  &quot;quick-option&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-boolean"><tt class="xref docutils literal"><span class="pre">boolean</span></tt></a>
<strong id="grammar-token-version">version             </strong> ::=  &quot;version&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-versionSpecification"><tt class="xref docutils literal"><span class="pre">versionSpecification</span></tt></a>
<strong id="grammar-token-versionSpecification">versionSpecification</strong> ::=  <a class="reference internal" href="#grammar-token-readProperty"><tt class="xref docutils literal"><span class="pre">readProperty</span></tt></a> | <a class="reference internal" href="#grammar-token-fixedVersion"><tt class="xref docutils literal"><span class="pre">fixedVersion</span></tt></a>
<strong id="grammar-token-readProperty">readProperty        </strong> ::=  &quot;read&quot;  &quot;(&quot; <a class="reference internal" href="#grammar-token-propertyName"><tt class="xref docutils literal"><span class="pre">propertyName</span></tt></a> &quot;)&quot;  &quot;[&quot; <a class="reference internal" href="#grammar-token-default"><tt class="xref docutils literal"><span class="pre">default</span></tt></a> &quot;]&quot;
<strong id="grammar-token-fixedVersion">fixedVersion        </strong> ::=  text
<strong id="grammar-token-classifiers">classifiers         </strong> ::=  &quot;classifiers&quot; &quot;:&quot; text (&quot;,&quot; text)*
<strong id="grammar-token-homeDirectory">homeDirectory       </strong> ::=  &quot;ivy-home&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>
<strong id="grammar-token-checksums">checksums           </strong> ::=  &quot;checksums&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-checksum"><tt class="xref docutils literal"><span class="pre">checksum</span></tt></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-checksum"><tt class="xref docutils literal"><span class="pre">checksum</span></tt></a>)*
<strong id="grammar-token-overrideRepos">overrideRepos       </strong> ::=  &quot;override-build-repos&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-boolean"><tt class="xref docutils literal"><span class="pre">boolean</span></tt></a>
<strong id="grammar-token-repoConfig">repoConfig          </strong> ::=  &quot;repository-config&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>
<strong id="grammar-token-org">org                 </strong> ::=  &quot;org&quot; &quot;:&quot; text
<strong id="grammar-token-name">name                </strong> ::=  &quot;name&quot; &quot;:&quot; text
<strong id="grammar-token-class">class               </strong> ::=  &quot;class&quot; &quot;:&quot; text
<strong id="grammar-token-components">components          </strong> ::=  &quot;components&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-component"><tt class="xref docutils literal"><span class="pre">component</span></tt></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-component"><tt class="xref docutils literal"><span class="pre">component</span></tt></a>)*
<strong id="grammar-token-crossVersioned">crossVersioned      </strong> ::=  &quot;cross-versioned&quot; &quot;:&quot;  (&quot;true&quot; | &quot;false&quot; | &quot;none&quot; | &quot;binary&quot; | &quot;full&quot;)
<strong id="grammar-token-resources">resources           </strong> ::=  &quot;resources&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-path"><tt class="xref docutils literal"><span class="pre">path</span></tt></a>)*
<strong id="grammar-token-repository">repository          </strong> ::=  ( <a class="reference internal" href="#grammar-token-predefinedRepository"><tt class="xref docutils literal"><span class="pre">predefinedRepository</span></tt></a> | <a class="reference internal" href="#grammar-token-customRepository"><tt class="xref docutils literal"><span class="pre">customRepository</span></tt></a> ) <a class="reference internal" href="#grammar-token-nl"><tt class="xref docutils literal"><span class="pre">nl</span></tt></a>
<strong id="grammar-token-predefinedRepository">predefinedRepository</strong> ::=  &quot;local&quot; | &quot;maven-local&quot; | &quot;maven-central&quot;
<strong id="grammar-token-customRepository">customRepository    </strong> ::=  <a class="reference internal" href="#grammar-token-label"><tt class="xref docutils literal"><span class="pre">label</span></tt></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-url"><tt class="xref docutils literal"><span class="pre">url</span></tt></a> [ [&quot;,&quot; <a class="reference internal" href="#grammar-token-ivyPattern"><tt class="xref docutils literal"><span class="pre">ivyPattern</span></tt></a>] [&quot;,&quot; <a class="reference internal" href="#grammar-token-artifactPattern"><tt class="xref docutils literal"><span class="pre">artifactPattern</span></tt></a>] [&quot;, mavenCompatible&quot;] [&quot;, bootOnly&quot;]]
<strong id="grammar-token-property">property            </strong> ::=  <a class="reference internal" href="#grammar-token-label"><tt class="xref docutils literal"><span class="pre">label</span></tt></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-propertyDefinition"><tt class="xref docutils literal"><span class="pre">propertyDefinition</span></tt></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-propertyDefinition"><tt class="xref docutils literal"><span class="pre">propertyDefinition</span></tt></a>)*
<strong id="grammar-token-propertyDefinition">propertyDefinition  </strong> ::=  <a class="reference internal" href="#grammar-token-mode"><tt class="xref docutils literal"><span class="pre">mode</span></tt></a> &quot;=&quot; (<a class="reference internal" href="#grammar-token-set"><tt class="xref docutils literal"><span class="pre">set</span></tt></a> | <a class="reference internal" href="#grammar-token-prompt"><tt class="xref docutils literal"><span class="pre">prompt</span></tt></a>)
<strong id="grammar-token-mode">mode                </strong> ::=  &quot;quick&quot; | &quot;new&quot; | &quot;fill&quot;
<strong id="grammar-token-set">set                 </strong> ::=  &quot;set&quot; &quot;(&quot; value &quot;)&quot;
<strong id="grammar-token-prompt">prompt              </strong> ::=  &quot;prompt&quot;  &quot;(&quot; <a class="reference internal" href="#grammar-token-label"><tt class="xref docutils literal"><span class="pre">label</span></tt></a> &quot;)&quot; (&quot;[&quot; <a class="reference internal" href="#grammar-token-default"><tt class="xref docutils literal"><span class="pre">default</span></tt></a> &quot;]&quot;)?
<strong id="grammar-token-boolean">boolean             </strong> ::=  &quot;true&quot; | &quot;false&quot;
<strong id="grammar-token-nl">nl                  </strong> ::=  &quot;\r\n&quot; | &quot;\n&quot; | &quot;\r&quot;
<strong id="grammar-token-path">path                </strong> ::=  text
<strong id="grammar-token-propertyName">propertyName        </strong> ::=  text
<strong id="grammar-token-label">label               </strong> ::=  text
<strong id="grammar-token-default">default             </strong> ::=  text
<strong id="grammar-token-checksum">checksum            </strong> ::=  text
<strong id="grammar-token-ivyPattern">ivyPattern          </strong> ::=  text
<strong id="grammar-token-artifactPattern">artifactPattern     </strong> ::=  text
<strong id="grammar-token-url">url                 </strong> ::=  text
<strong id="grammar-token-component">component           </strong> ::=  text
</pre>
<p>In addition to the grammar specified here, property values may include
variable substitutions. A variable substitution has one of these forms:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">${variable.name}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">${variable.name-default}</span></tt></li>
</ul>
<p>where <tt class="docutils literal"><span class="pre">variable.name</span></tt> is the name of a system property. If a system
property by that name exists, the value is substituted. If it does not
exists and a default is specified, the default is substituted after
recursively substituting variables in it. If the system property does
not exist and no default is specified, the original string is not
substituted.</p>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The default configuration file for sbt looks like:</p>
<div class="highlight-ini"><pre>[scala]
  version: ${sbt.scala.version-auto}

[app]
  org: ${sbt.organization-org.scala-sbt}
  name: sbt
  version: ${sbt.version-read(sbt.version)[0.12.0]}
  class: ${sbt.main.class-sbt.xMain}
  components: xsbti,extra
  cross-versioned: ${sbt.cross.versioned-false}

[repositories]
  local
  typesafe-ivy-releases: http://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly
  maven-central
  sonatype-snapshots: https://oss.sonatype.org/content/repositories/snapshots

[boot]
 directory: ${sbt.boot.directory-${sbt.global.base-${user.home}/.sbt}/boot/}

[ivy]
  ivy-home: ${sbt.ivy.home-${user.home}/.ivy2/}
  checksums: ${sbt.checksums-sha1,md5}
  override-build-repos: ${sbt.override.build.repos-false}
  repository-config: ${sbt.repository.config-${sbt.global.base-${user.home}/.sbt}/repositories}</pre>
</div>
</div>
<div class="section" id="semantics">
<h4>Semantics<a class="headerlink" href="#semantics" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">scala.version</span></tt> property specifies the version of Scala used to
run the application. If the application is not cross-built, this may be
set to <tt class="docutils literal"><span class="pre">auto</span></tt> and it will be auto-detected from the application's
dependencies. If specified, the <tt class="docutils literal"><span class="pre">scala.classifiers</span></tt> property defines
classifiers, such as 'sources', of extra Scala artifacts to retrieve.</p>
<p>The <tt class="docutils literal"><span class="pre">app.org</span></tt>, <tt class="docutils literal"><span class="pre">app.name</span></tt>, and <tt class="docutils literal"><span class="pre">app.version</span></tt> properties specify
the organization, module ID, and version of the application,
respectively. These are used to resolve and retrieve the application
from the repositories listed in <tt class="docutils literal"><span class="pre">[repositories]</span></tt>. If
<tt class="docutils literal"><span class="pre">app.cross-versioned</span></tt> is <tt class="docutils literal"><span class="pre">binary</span></tt>, the resolved module ID is
<tt class="docutils literal"><span class="pre">{app.name+'_'+CrossVersion.binaryScalaVersion(scala.version)}</span></tt>.
If <tt class="docutils literal"><span class="pre">app.cross-versioned</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">full</span></tt>, the resolved module ID is
<tt class="docutils literal"><span class="pre">{app.name+'_'+scala.version}</span></tt>. The <tt class="docutils literal"><span class="pre">scala.version</span></tt> property must be
specified and cannot be <tt class="docutils literal"><span class="pre">auto</span></tt> when cross-versioned. The paths given
in <tt class="docutils literal"><span class="pre">app.resources</span></tt> are added to the application's classpath. If the
path is relative, it is resolved against the application's working
directory. If specified, the <tt class="docutils literal"><span class="pre">app.classifiers</span></tt> property defines
classifiers, like 'sources', of extra artifacts to retrieve for the
application.</p>
<p>Jars are retrieved to the directory given by <tt class="docutils literal"><span class="pre">boot.directory</span></tt>. By
default, this is an absolute path that is shared by all launched
instances on the machine. If multiple versions access it simultaneously.
, you might see messages like:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Waiting for lock on &lt;lock-file&gt; to be available...</span>
</pre></div>
</div>
<p>This boot directory may be relative to the current directory instead. In
this case, the launched application will have a separate boot directory
for each directory it is launched in.</p>
<p>The <tt class="docutils literal"><span class="pre">boot.properties</span></tt> property specifies the location of the
properties file to use if <tt class="docutils literal"><span class="pre">app.version</span></tt> or <tt class="docutils literal"><span class="pre">scala.version</span></tt> is
specified as <tt class="docutils literal"><span class="pre">read</span></tt>. The <tt class="docutils literal"><span class="pre">prompt-create</span></tt>, <tt class="docutils literal"><span class="pre">prompt-fill</span></tt>, and
<tt class="docutils literal"><span class="pre">quick-option</span></tt> properties together with the property definitions in
<tt class="docutils literal"><span class="pre">[app.properties]</span></tt> can be used to initialize the <tt class="docutils literal"><span class="pre">boot.properties</span></tt>
file.</p>
<p>The app.class property specifies the name of the entry point to the
application. An application entry point must be a public class with a
no-argument constructor that implements <tt class="docutils literal"><span class="pre">xsbti.AppMain</span></tt>. The
<tt class="docutils literal"><span class="pre">AppMain</span></tt> interface specifies the entry method signature 'run'. The
run method is passed an instance of AppConfiguration, which provides
access to the startup environment. <tt class="docutils literal"><span class="pre">AppConfiguration</span></tt> also provides an
interface to retrieve other versions of Scala or other applications.
Finally, the return type of the run method is <tt class="docutils literal"><span class="pre">xsbti.MainResult</span></tt>,
which has two subtypes: <tt class="docutils literal"><span class="pre">xsbti.Reboot</span></tt> and <tt class="docutils literal"><span class="pre">xsbti.Exit</span></tt>. To exit
with a specific code, return an instance of <tt class="docutils literal"><span class="pre">xsbti.Exit</span></tt> with the
requested code. To restart the application, return an instance of
Reboot. You can change some aspects of the configuration with a reboot,
such as the version of Scala, the application ID, and the arguments.</p>
<p>The <tt class="docutils literal"><span class="pre">ivy.cache-directory</span></tt> property provides an alternative location
for the Ivy cache used by the launcher. This does not automatically set
the Ivy cache for the application, but the application is provided this
location through the AppConfiguration instance. The <tt class="docutils literal"><span class="pre">checksums</span></tt>
property selects the checksum algorithms (sha1 or md5) that are used to
verify artifacts downloaded by the launcher. <tt class="docutils literal"><span class="pre">override-build-repos</span></tt> is
a flag that can inform the application that the repositories configured
for the launcher should be used in the application. If
<tt class="docutils literal"><span class="pre">repository-config</span></tt> is defined, the file it specifies should contain a
<tt class="docutils literal"><span class="pre">[repositories]</span></tt> section that is used in place of the section in the
original configuration file.</p>
</div>
</div>
<div class="section" id="execution">
<h3>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h3>
<p>On startup, the launcher searches for its configuration in the order
described in the Configuration section and then parses it. If either the
Scala version or the application version are specified as 'read', the
launcher determines them in the following manner. The file given by the
'boot.properties' property is read as a Java properties file to obtain
the version. The expected property names are <tt class="docutils literal"><span class="pre">${app.name}.version</span></tt> for
the application version (where <tt class="docutils literal"><span class="pre">${app.name}</span></tt> is replaced with the
value of the <tt class="docutils literal"><span class="pre">app.name</span></tt> property from the boot configuration file) and
<tt class="docutils literal"><span class="pre">scala.version</span></tt> for the Scala version. If the properties file does not
exist, the default value provided is used. If no default was provided,
an error is generated.</p>
<p>Once the final configuration is resolved, the launcher proceeds to
obtain the necessary jars to launch the application. The
<tt class="docutils literal"><span class="pre">boot.directory</span></tt> property is used as a base directory to retrieve jars
to. Locking is done on the directory, so it can be shared system-wide.
The launcher retrieves the requested version of Scala to</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span><span class="o">{</span>boot.directory<span class="o">}</span>/<span class="k">${</span><span class="nv">scala</span><span class="p">.version</span><span class="k">}</span>/lib/
</pre></div>
</div>
<p>If this directory already exists, the launcher takes a shortcut for
startup performance and assumes that the jars have already been
downloaded. If the directory does not exist, the launcher uses Apache
Ivy to resolve and retrieve the jars. A similar process occurs for the
application itself. It and its dependencies are retrieved to</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span><span class="o">{</span>boot.directory<span class="o">}</span>/<span class="k">${</span><span class="nv">scala</span><span class="p">.version</span><span class="k">}</span>/<span class="k">${</span><span class="nv">app</span><span class="p">.org</span><span class="k">}</span>/<span class="k">${</span><span class="nv">app</span><span class="p">.name</span><span class="k">}</span>/.
</pre></div>
</div>
<p>Once all required code is downloaded, the class loaders are set up. The
launcher creates a class loader for the requested version of Scala. It
then creates a child class loader containing the jars for the requested
'app.components' and with the paths specified in <tt class="docutils literal"><span class="pre">app.resources</span></tt>. An
application that does not use components will have all of its jars in
this class loader.</p>
<p>The main class for the application is then instantiated. It must be a
public class with a public no-argument constructor and must conform to
xsbti.AppMain. The <tt class="docutils literal"><span class="pre">run</span></tt> method is invoked and execution passes to the
application. The argument to the 'run' method provides configuration
information and a callback to obtain a class loader for any version of
Scala that can be obtained from a repository in [repositories]. The
return value of the run method determines what is done after the
application executes. It can specify that the launcher should restart
the application or that it should exit with the provided exit code.</p>
</div>
<div class="section" id="creating-a-launched-application">
<h3>Creating a Launched Application<a class="headerlink" href="#creating-a-launched-application" title="Permalink to this headline">¶</a></h3>
<p>This section shows how to make an application that is launched by this
launcher. First, declare a dependency on the launcher-interface. Do not
declare a dependency on the launcher itself. The launcher interface
consists strictly of Java interfaces in order to avoid binary
incompatibility between the version of Scala used to compile the
launcher and the version used to compile your application. The launcher
interface class will be provided by the launcher, so it is only a
compile-time dependency. If you are building with sbt, your dependency
definition would be:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;org.scala-sbt&quot;</span> <span class="o">%</span> <span class="s">&quot;launcher-interface&quot;</span> <span class="o">%</span> <span class="s">&quot;0.12.0&quot;</span> <span class="o">%</span> <span class="s">&quot;provided&quot;</span>

<span class="n">resolvers</span> <span class="o">+=</span> <span class="n">sbtResolver</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p>Make the entry point to your class implement 'xsbti.AppMain'. An example
that uses some of the information:</p>
<div class="highlight-scala"><pre>package xsbt.test
class Main extends xsbti.AppMain
{
    def run(configuration: xsbti.AppConfiguration) =
    {
        // get the version of Scala used to launch the application
        val scalaVersion = configuration.provider.scalaProvider.version

        // Print a message and the arguments to the application
        println(&quot;Hello world!  Running Scala &quot; + scalaVersion)
        configuration.arguments.foreach(println)

        // demonstrate the ability to reboot the application into different versions of Scala
        // and how to return the code to exit with
        scalaVersion match
        {
            case &quot;2.8.2&quot; =&gt;
                new xsbti.Reboot {
                    def arguments = configuration.arguments
                    def baseDirectory = configuration.baseDirectory
                    def scalaVersion = &quot;2.9.2
                    def app = configuration.provider.id
                }
            case &quot;2.9.2&quot; =&gt; new Exit(1)
            case _ =&gt; new Exit(0)
        }
    }
    class Exit(val code: Int) extends xsbti.Exit
}</pre>
</div>
<p>Next, define a configuration file for the launcher. For the above class,
it might look like:</p>
<div class="highlight-ini"><pre>[scala]
  version: 2.9.2
[app]
  org: org.scala-sbt
  name: xsbt-test
  version: 0.12.0
  class: xsbt.test.Main
  cross-versioned: binary
[repositories]
  local
  maven-central
[boot]
 directory: ${user.home}/.myapp/boot</pre>
</div>
<p>Then, <tt class="docutils literal"><span class="pre">publishLocal</span></tt> or <tt class="docutils literal"><span class="pre">+publishLocal</span></tt> the application to make it
available.</p>
</div>
<div class="section" id="running-an-application">
<h3>Running an Application<a class="headerlink" href="#running-an-application" title="Permalink to this headline">¶</a></h3>
<p>As mentioned above, there are a few options to actually run the
application. The first involves providing a modified jar for download.
The second two require providing a configuration file for download.</p>
<ul class="simple">
<li>Replace the /sbt/sbt.boot.properties file in the launcher jar and
distribute the modified jar. The user would need a script to run
<tt class="docutils literal"><span class="pre">java</span> <span class="pre">-jar</span> <span class="pre">your-launcher.jar</span> <span class="pre">arg1</span> <span class="pre">arg2</span> <span class="pre">...</span></tt>.</li>
<li>The user downloads the launcher jar and you provide the configuration
file.<ul>
<li>The user needs to run <tt class="docutils literal"><span class="pre">java</span> <span class="pre">-Dsbt.boot.properties=your.boot.properties</span> <span class="pre">-jar</span> <span class="pre">launcher.jar</span></tt>.</li>
<li>The user already has a script to run the launcher (call it
'launch'). The user needs to run <tt class="docutils literal"><span class="pre">launch</span> <span class="pre">&#64;your.boot.properties</span> <span class="pre">your-arg-1</span> <span class="pre">your-arg-2</span></tt></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"><ul>
<li><a class="reference internal" href="#">Launcher Specification</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#semantics">Semantics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execution">Execution</a></li>
<li><a class="reference internal" href="#creating-a-launched-application">Creating a Launched Application</a></li>
<li><a class="reference internal" href="#running-an-application">Running an Application</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>  
  

  </body>
</html>